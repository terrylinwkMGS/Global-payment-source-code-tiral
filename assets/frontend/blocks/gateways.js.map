{"version":3,"file":"gateways.js","mappings":";;;;;;;;;;;;;;;;;AAAmD;AACH;AAEzC,MAAMG,eAAe,GAAGA,CAAE;EAAEC;AAAG,CAAC,KAAM;EAC5C,MAAMC,QAAQ,GAAGL,iEAAU,CAAEI,EAAE,GAAG,OAAO,EAAE,CAAC,CAAE,CAAC;EAC/C,MAAMH,MAAM,GAAGC,+CAAS,CAAEG,QAAQ,CAACC,aAAc,CAAC;EAClDL,MAAM,CAACM,oBAAoB,CAAC,CAAC;AAC9B,CAAC;;;;;;;;;;;;;;;;;;;ACPkD;AACH;AACd;AAElC,MAAM;EAAEE;AAAG,CAAC,GAAGC,EAAE,CAACC,IAAI;AAEf,MAAMC,eAAe,GAAKC,KAAK,IAAM;EAC3C,MAAM;IAAET,EAAE;IAAEU;EAAkB,CAAC,GAAGD,KAAK;EACvC,MAAM;IAAEE;EAAe,CAAC,GAAGD,iBAAiB;EAC5C,MAAMT,QAAQ,GAAGL,iEAAU,CAAEI,EAAE,GAAG,OAAO,EAAE,CAAC,CAAE,CAAC;EAC/C,MAAMH,MAAM,GAAGC,+CAAS,CAAEG,QAAQ,CAACC,aAAc,CAAC;EAClDL,MAAM,CAACM,oBAAoB,CAAC,CAAC;EAE7BC,gDAAS,CAAE,MAAM;IAChB,MAAMQ,WAAW,GAAGD,cAAc,CAAE,MAAM;MACzC,MAAME,aAAa,GAAGC,QAAQ,CAACC,cAAc,CAAE,gBAAiB,CAAC;MACjE,MAAMC,YAAY,GAAGF,QAAQ,CAACC,cAAc,CAAE,eAAgB,CAAC;MAC/D,IAAK,CAAEF,aAAa,EAAEI,KAAK,IAAI,CAAED,YAAY,EAAEC,KAAK,EAAG;QACtD,OAAO;UACNC,IAAI,EAAE,OAAO;UACbC,OAAO,EAAEd,EAAE,CAAE,qEAAqE,EAAE,iDAAkD;QACvI,CAAC;MACF;MAEA,OAAO,IAAI;IACZ,CAAE,CAAC;IAEH,OAAO,MAAM;MACZO,WAAW,CAAC,CAAC;IACd,CAAC;EACF,CAAC,EAAE,CAAED,cAAc,CAAG,CAAC;AACxB,CAAC;;;;;;;;;;;;;;;;;;;AC/BkD;AACH;AACd;AAElC,MAAM;EAAEN;AAAG,CAAC,GAAGC,EAAE,CAACC,IAAI;AAEf,MAAMa,eAAe,GAAKX,KAAK,IAAM;EAC3C,MAAM;IAAET,EAAE;IAAEU;EAAkB,CAAC,GAAGD,KAAK;EACvC,MAAM;IAAEE;EAAe,CAAC,GAAGD,iBAAiB;EAC5C,MAAMT,QAAQ,GAAGL,iEAAU,CAAEI,EAAE,GAAG,OAAO,EAAE,CAAC,CAAE,CAAC;EAC/C,MAAMH,MAAM,GAAGC,+CAAS,CAAEG,QAAQ,CAACC,aAAc,CAAC;EAClDL,MAAM,CAACM,oBAAoB,CAAC,CAAC;EAE7BC,gDAAS,CAAE,MAAM;IAChB,MAAMQ,WAAW,GAAGD,cAAc,CAAE,MAAM;MACzC,MAAME,aAAa,GAAGC,QAAQ,CAACC,cAAc,CAAE,gBAAiB,CAAC;MACjE,MAAMC,YAAY,GAAGF,QAAQ,CAACC,cAAc,CAAE,eAAgB,CAAC;MAC/D,IAAK,CAAEF,aAAa,EAAEI,KAAK,IAAI,CAAED,YAAY,EAAEC,KAAK,EAAG;QACtD,OAAO;UACNC,IAAI,EAAE,OAAO;UACbC,OAAO,EAAEd,EAAE,CAAE,qEAAqE,EAAE,iDAAkD;QACvI,CAAC;MACF;MAEA,OAAO,IAAI;IACZ,CAAE,CAAC;IAEH,OAAO,MAAM;MACZO,WAAW,CAAC,CAAC;IACd,CAAC;EACF,CAAC,EAAE,CAAED,cAAc,CAAG,CAAC;AACxB,CAAC;;;;;;;;;;;;;;;;;;;AC/BkD;AACW;AAC5B;AAElC,MAAM;EAAEN;AAAG,CAAC,GAAGC,EAAE,CAACC,IAAI;AAEtB,MAAMc,KAAK,GAAG;EACbC,KAAK,EAAE,IAAI;EACXrB,QAAQ,EAAE;AACX,CAAC;AAED,IAAIJ,MAAM,GAAG,CAAC,CAAC;AAER,MAAM0B,iBAAiB,GAAGA,CAAA,KAAM;EACtCF,KAAK,CAACpB,QAAQ,GAAGL,iEAAU,CAAE,8BAA8B,EAAE,CAAC,CAAE,CAAC;EAEjEC,MAAM,GAAGC,0DAAS,CAAEuB,KAAK,CAACpB,QAAQ,CAACC,aAAc,CAAC;EAElDE,gDAAS,CAAE,MAAM;IAChBoB,mBAAmB,CAAC,CAAC;IAErB,OAAO,MAAM;MACZ,IAAK,CAAEV,QAAQ,CAACW,aAAa,CAAE5B,MAAM,CAAC6B,6BAA6B,CAAEL,KAAK,CAACpB,QAAQ,CAACD,EAAG,CAAE,CAAC,EAAE2B,OAAO,EAAG;QACrGC,oBAAoB,CAAC,CAAC;QACtB/B,MAAM,CAACgC,mBAAmB,CAAC,CAAC;MAC7B;IACD,CAAC;EACF,CAAE,CAAC;AACJ,CAAC;AAED,MAAML,mBAAmB,GAAGA,CAAA,KAAM;EACjC,IAAK3B,MAAM,CAACiC,oBAAoB,CAAET,KAAK,CAACpB,QAAQ,CAACD,EAAG,CAAC,IAAIH,MAAM,CAACkC,4BAA4B,CAAEV,KAAK,CAACpB,QAAQ,CAACD,EAAG,CAAC,EAAG;IACnHgC,MAAM,CAACC,MAAM,GAAG,MAAM;MACrBC,UAAU,CAAC,CAAC;IACb,CAAC;EACF;EAEApB,QAAQ,CAACW,aAAa,CAAE,kEAAmE,CAAC,CAACU,gBAAgB,CAAE,QAAQ,EAAED,UAAW,CAAC;AACtI,CAAC;AAED,MAAMA,UAAU,GAAGA,CAAA,KAAM;EACxBrC,MAAM,CAACgC,mBAAmB,CAAC,CAAC;EAE5BO,iBAAiB,CAAC,CAAC;AACpB,CAAC;;AAED;AACA;AACA;AACA,MAAMA,iBAAiB,GAAGA,CAAA,KAAM;EAC/BvC,MAAM,CAACwC,wBAAwB,CAAEhB,KAAK,CAACpB,QAAQ,CAACD,EAAG,CAAC;EAEpD,MAAMsC,aAAa,GAAGxB,QAAQ,CAACyB,aAAa,CAAE,KAAM,CAAC;EACrDD,aAAa,CAACE,SAAS,GAAG,oCAAoC,GAAGnB,KAAK,CAACpB,QAAQ,CAACwC,sBAAsB,CAACC,YAAY;EACnHJ,aAAa,CAACK,KAAK,GAAGtC,EAAE,CAAE,oBAAoB,EAAE,iDAAiD,CAAC;EAClGiC,aAAa,CAACM,GAAG,GAAGvC,EAAE,CAAE,oBAAoB,EAAE,iDAAiD,CAAC;EAChGiC,aAAa,CAACtC,EAAE,GAAGqB,KAAK,CAACpB,QAAQ,CAACD,EAAE;EAEpCsC,aAAa,CAACH,gBAAgB,CAAE,OAAO,EAAIU,CAAC,IAAM;IACjDA,CAAC,CAACC,cAAc,CAAC,CAAC;IAElB,IAAKjD,MAAM,CAACkD,mBAAmB,CAAC,CAAC,EAAG;MACnCf,MAAM,CAAC1B,EAAE,CAAC0C,IAAI,CAACC,QAAQ,CAAEjB,MAAM,CAACkB,EAAE,CAACC,YAAY,CAACC,oBAAoB,CAAC,CAACC,uBAAuB,CAAC,CAAC;MAE/FvC,QAAQ,CAACW,aAAa,CAAE,YAAa,CAAC,EAAE6B,cAAc,CAAE;QACvDC,QAAQ,EAAE,QAAQ;QAClBC,KAAK,EAAE,QAAQ;QACfC,MAAM,EAAE;MACT,CAAE,CAAC;MAEH;IACD;IAEA,MAAMC,eAAe,GAAGC,qBAAqB,CAAC,CAAC;IAC/CD,eAAe,CAACE,KAAK,CAAC,CAAC;EACxB,CAAE,CAAC;EAEH9C,QAAQ,CAACW,aAAa,CAAE5B,MAAM,CAACgE,6BAA6B,CAAExC,KAAK,CAACpB,QAAQ,CAACD,EAAG,CAAE,CAAC,CAAC8D,MAAM,CAAExB,aAAc,CAAC;AAC5G,CAAC;AAED,MAAMqB,qBAAqB,GAAGA,CAAA,KAAM;EACnC9D,MAAM,CAACkE,YAAY,CAAC,CAAC;EAErB1C,KAAK,CAACC,KAAK,GAAGzB,MAAM,CAACyB,KAAK;EAC1B,IAAIoC,eAAe,GAAG,IAAI;EAE1B,IAAI;IACHA,eAAe,GAAG,IAAIM,eAAe,CAAE,CAAC,EAAEC,iBAAiB,CAAC,CAAE,CAAC;EAChE,CAAC,CAAC,OAAQC,GAAG,EAAG;IACfC,OAAO,CAACC,KAAK,CAAE/D,EAAE,CAAE,kCAAkC,EAAE,iDAAkD,CAAC,EAAE6D,GAAI,CAAC;IACjHG,KAAK,CAAEhE,EAAE,CAAE,8GAA8G,EAAE,iDAAkD,CAAE,CAAC;IAChL,OAAO,KAAK;EACb;;EAEA;EACAqD,eAAe,CAACY,kBAAkB,GAAKC,KAAK,IAAM;IACjDC,0BAA0B,CAAED,KAAK,EAAEb,eAAgB,CAAC;EACrD,CAAC;;EAED;EACAA,eAAe,CAACe,mBAAmB,GAAKF,KAAK,IAAM;IAClDG,0BAA0B,CAAEH,KAAK,EAAEb,eAAgB,CAAC;EACrD,CAAC;EAEDA,eAAe,CAACiB,QAAQ,GAAKJ,KAAK,IAAM;IACvCF,KAAK,CAAEhE,EAAE,CAAE,8GAA8G,EAAE,iDAAkD,CAAE,CAAC;EACjL,CAAC;EAED,OAAOqD,eAAe;AACvB,CAAC;AAED,MAAMO,iBAAiB,GAAGA,CAAA,KAAM;EAC/B,OAAO;IACNW,WAAW,EAAEC,YAAY,CAAC,CAAC;IAC3BC,YAAY,EAAEzD,KAAK,CAACC,KAAK,CAACyD,QAAQ;IAClCC,oBAAoB,EAAE,CACrB,aAAa,CACb;IACDC,iBAAiB,EAAEC,sBAAsB,CAAC,CAAC;IAC3CC,KAAK,EAAE;MACNC,KAAK,EAAEC,cAAc,CAAC,CAAC;MACvBC,MAAM,EAAEjE,KAAK,CAACC,KAAK,CAACgE,MAAM,CAACC,QAAQ,CAAC;IACrC,CAAC;IACDC,4BAA4B,EAAE,CAAE,eAAe,EAAE,MAAM;EACxD,CAAC;AACF,CAAC;AAED,MAAMX,YAAY,GAAGA,CAAA,KAAM;EAC1B,OAAOxD,KAAK,CAACpB,QAAQ,CAACwC,sBAAsB,CAACgD,YAAY;AAC1D,CAAC;AAED,MAAMP,sBAAsB,GAAGA,CAAA,KAAM;EACpC,OAAO7D,KAAK,CAACpB,QAAQ,CAACwC,sBAAsB,CAACiD,QAAQ;AACtD,CAAC;AAED,MAAML,cAAc,GAAGA,CAAA,KAAM;EAC5B,OAAOhE,KAAK,CAACpB,QAAQ,CAACwC,sBAAsB,CAACkD,2BAA2B;AACzE,CAAC;AAED,MAAMnB,0BAA0B,GAAGA,CAAED,KAAK,EAAEqB,OAAO,KAAM;EACxDC,KAAK,CAAExE,KAAK,CAACpB,QAAQ,CAACwC,sBAAsB,CAACqD,qBAAqB,EAAE;IACnEC,KAAK,EAAE,UAAU;IACjBC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAE;MAAE,eAAe,EAAE3B,KAAK,CAAC4B;IAAc,CAAE,CAAC;IAChEC,MAAM,EAAE;EACT,CAAE,CAAC,CAACC,IAAI,CAAIC,QAAQ,IAAMA,QAAQ,CAACC,IAAI,CAAC,CAAE,CAAC,CAC1CF,IAAI,CAAIC,QAAQ,IAAM;IACtB,IAAKA,QAAQ,CAAClC,KAAK,EAAG;MACrBD,OAAO,CAACqC,GAAG,CAAE,UAAU,EAAEF,QAAS,CAAC;MACnCV,OAAO,CAACa,KAAK,CAAC,CAAC;MACfpC,KAAK,CAAEhE,EAAE,CAAE,8GAA8G,EAAE,iDAAkD,CAAE,CAAC;IACjL,CAAC,MAAM;MACNuF,OAAO,CAACc,0BAA0B,CAAET,IAAI,CAACU,KAAK,CAAEL,QAAQ,CAACnF,OAAQ,CAAE,CAAC;IACrE;EACD,CAAE,CAAC,CAACyF,KAAK,CAAIN,QAAQ,IAAM;IAC1BnC,OAAO,CAACqC,GAAG,CAAE,UAAU,EAAEF,QAAS,CAAC;IACnCV,OAAO,CAACa,KAAK,CAAC,CAAC;IACfpC,KAAK,CAAEhE,EAAE,CAAE,8GAA8G,EAAE,iDAAkD,CAAE,CAAC;EACjL,CAAE,CAAC;AACJ,CAAC;AAED,MAAMqE,0BAA0B,GAAGA,CAAEH,KAAK,EAAEqB,OAAO,KAAM;EACxD,IAAI;IACH,MAAMiB,iBAAiB,GAAG;MACzBC,QAAQ,EAAEb,IAAI,CAACC,SAAS,CAAE3B,KAAK,CAACwC,OAAO,CAACC,KAAK,CAACC,WAAY;IAC3D,CAAC;IAED,IAAK1C,KAAK,CAACwC,OAAO,CAACG,cAAc,EAAG;MACnCL,iBAAiB,CAACM,cAAc,GAAG5C,KAAK,CAACwC,OAAO,CAACG,cAAc,CAACE,SAAS,GAAG,GAAG,GAAI7C,KAAK,CAACwC,OAAO,CAACG,cAAc,CAACG,UAAU;IAC3H;IAEAxH,MAAM,CAACyH,oBAAoB,CAAET,iBAAkB,CAAC;IAEhD,MAAMU,cAAc,GAAGzG,QAAQ,CAACW,aAAa,CAAE5B,MAAM,CAAC2H,2BAA2B,CAAC,CAAE,CAAC;IACrF,IAAKD,cAAc,EAAG;MACrBA,cAAc,CAACE,KAAK,CAAC,CAAC;MACtB7B,OAAO,CAAC8B,eAAe,CAAE1D,eAAe,CAAC2D,cAAe,CAAC;MACzD;IACD;EACD,CAAC,CAAC,OAAQ9E,CAAC,EAAG;IACb+C,OAAO,CAAC8B,eAAe,CAAE1D,eAAe,CAAC4D,cAAe,CAAC;EAC1D;EACAhC,OAAO,CAAC8B,eAAe,CAAE1D,eAAe,CAAC2D,cAAe,CAAC;EACzD7G,QAAQ,CAACW,aAAa,CAAE5B,MAAM,CAACgI,eAAe,CAAC,CAAE,CAAC,CAACC,MAAM,CAAC,CAAC;AAC5D,CAAC;AAED,MAAMlG,oBAAoB,GAAGA,CAAA,KAAM;EAClCd,QAAQ,CAACW,aAAa,CAAE5B,MAAM,CAACgE,6BAA6B,CAAExC,KAAK,CAACpB,QAAQ,CAACD,EAAG,CAAE,CAAC,EAAE+H,MAAM,CAAC,CAAC;AAC9F,CAAC;;;;;;;;;;;;;;;;;;;;AC3LkD;AACW;AAC5B;AAElC,MAAM;EAAE1H;AAAG,CAAC,GAAGC,EAAE,CAACC,IAAI;AAEtB,MAAMc,KAAK,GAAG;EACbC,KAAK,EAAE,IAAI;EACX0G,OAAO,EAAE,IAAI;EACb/H,QAAQ,EAAE;AACX,CAAC;AAED,IAAIJ,MAAM,GAAG,CAAC,CAAC;AAER,MAAMoI,mBAAmB,GAAGA,CAAA,KAAM;EACxC5G,KAAK,CAACpB,QAAQ,GAAGL,iEAAU,CAAE,gCAAgC,EAAE,CAAC,CAAE,CAAC;EACnEC,MAAM,GAAGC,0DAAS,CAAEuB,KAAK,CAACpB,QAAQ,CAACC,aAAc,CAAC;EAElDE,gDAAS,CAAE,MAAM;IAChBoB,mBAAmB,CAAC,CAAC;IAErB,OAAO,MAAM;MACZ,IAAK,CAAEV,QAAQ,CAACW,aAAa,CAAE5B,MAAM,CAAC6B,6BAA6B,CAAEL,KAAK,CAACpB,QAAQ,CAACD,EAAG,CAAE,CAAC,EAAE2B,OAAO,EAAG;QACrG9B,MAAM,CAACgC,mBAAmB,CAAC,CAAC;MAC7B;IACD,CAAC;EACF,CAAE,CAAC;EAEH,OACCU,oDAAA,CAAA2F,2CAAA,QACC3F,oDAAA;IAAKvC,EAAE,EAAGqB,KAAK,CAACpB,QAAQ,CAACD;EAAI,CAAM,CAClC,CAAC;AAEL,CAAC;AAED,MAAMwB,mBAAmB,GAAGA,CAAA,KAAM;EACjC,IAAK3B,MAAM,CAACiC,oBAAoB,CAAET,KAAK,CAACpB,QAAQ,CAACD,EAAG,CAAC,IAAIH,MAAM,CAACkC,4BAA4B,CAAEV,KAAK,CAACpB,QAAQ,CAACD,EAAG,CAAC,EAAG;IACnHgC,MAAM,CAACC,MAAM,GAAG,MAAM;MACrBkG,gBAAgB,CAAC,CAAC;IACnB,CAAC;EACF;EAEArH,QAAQ,CAACW,aAAa,CAAE,oEAAqE,CAAC,CAACU,gBAAgB,CAAE,QAAQ,EAAEgG,gBAAiB,CAAC;AAC9I,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA,MAAMA,gBAAgB,GAAGA,CAAA,KAAM;EAC9BtI,MAAM,CAACgC,mBAAmB,CAAC,CAAC;EAE5BuG,YAAY,CAAC,CAAC;EAEd,IAAK,CAAEC,cAAc,CAACC,SAAS,EAAG;IACjCnE,OAAO,CAACqC,GAAG,CAAEnG,EAAE,CAAE,0CAA0C,EAAE,iDAAkD,CAAE,CAAC;IAClH;EACD;EAEA,MAAMkI,aAAa,GAAGlH,KAAK,CAACpB,QAAQ,CAACwC,sBAAsB;EAE3D5C,MAAM,CAACkE,YAAY,CAAC,CAAC;EAErB1C,KAAK,CAACC,KAAK,GAAGzB,MAAM,CAACyB,KAAK;EAC1BiH,aAAa,CAACC,IAAI,CAAC1D,YAAY,GAAGzD,KAAK,CAACC,KAAK,CAACyD,QAAQ;EAEtDsD,cAAc,CAACC,SAAS,CAAEC,aAAc,CAAC;EACzCF,cAAc,CAACI,EAAE,CAAE,OAAO,EAAEC,YAAa,CAAC;EAE1CrH,KAAK,CAAC2G,OAAO,GAAGK,cAAc,CAACM,GAAG,CAACC,IAAI,CAAE,GAAG,GAAGvH,KAAK,CAACpB,QAAQ,CAACD,EAAE,EAAE;IACjEsF,MAAM,EAAEjE,KAAK,CAACC,KAAK,CAACgE,MAAM,CAACC,QAAQ,CAAC,CAAC;IACrCsD,KAAK,EAAE,YAAY;IACnBL,IAAI,EAAE,CAAEH,cAAc,CAACS,KAAK,CAACC,GAAG,CAACC,UAAU;EAC5C,CAAE,CAAC;EAEH3H,KAAK,CAAC2G,OAAO,CAACS,EAAE,CAAE,eAAe,EAAEQ,cAAe,CAAC;EAEnD5H,KAAK,CAAC2G,OAAO,CAACS,EAAE,CAAE,aAAa,EAAEC,YAAa,CAAC;EAC/CrH,KAAK,CAAC2G,OAAO,CAACS,EAAE,CAAE,OAAO,EAAEC,YAAa,CAAC;AAC1C,CAAC;;AAED;AACA;AACA;AACA,MAAMN,YAAY,GAAGA,CAAA,KAAM;EAC1B,MAAMc,UAAU,GAAGpI,QAAQ,CAACW,aAAa,CAAE,GAAG,GAAGJ,KAAK,CAACpB,QAAQ,CAACD,EAAG,CAAC;EACpE,IAAKkJ,UAAU,EAAEC,QAAQ,CAACC,MAAM,GAAG,CAAC,EAAG;IACtC,OAAQF,UAAU,CAACG,UAAU,EAAG;MAC/BH,UAAU,CAACI,WAAW,CAAEJ,UAAU,CAACK,SAAU,CAAC;IAC/C;IAEAzI,QAAQ,CAACW,aAAa,CAAE,GAAG,GAAGJ,KAAK,CAACpB,QAAQ,CAACD,EAAE,GAAG,WAAY,CAAC,EAAE+H,MAAM,CAAC,CAAC;EAC1E;AACD,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAMW,YAAY,GAAKtE,KAAK,IAAM;EACjCD,OAAO,CAACC,KAAK,CAAEA,KAAM,CAAC;AACvB,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM6E,cAAc,GAAK3C,QAAQ,IAAM;EACtCzG,MAAM,CAACyH,oBAAoB,CAAE;IAC5BR,QAAQ,EAAER,QAAQ,CAACkD;EACpB,CAAE,CAAC;EAEH,OAAO3J,MAAM,CAAC4J,UAAU,CAAC,CAAC;AAC3B,CAAC;;;;;;;;;;;;;;;;;;;AC5HkD;AACW;AAC5B;AAElC,MAAMpI,KAAK,GAAG;EACbC,KAAK,EAAE,IAAI;EACXrB,QAAQ,EAAE,IAAI;EACdyJ,cAAc,EAAE;AACjB,CAAC;AAED,IAAI7J,MAAM,GAAG,CAAC,CAAC;AAER,MAAM8J,kBAAkB,GAAKlJ,KAAK,IAAM;EAC9C,MAAM;IAAEC;EAAkB,CAAC,GAAGD,KAAK;EAEnCY,KAAK,CAACpB,QAAQ,GAAGL,iEAAU,CAAE,+BAA+B,EAAE,CAAC,CAAE,CAAC;EAElEC,MAAM,GAAGC,0DAAS,CAAEuB,KAAK,CAACpB,QAAQ,CAACC,aAAc,CAAC;EAElD,MAAM;IAAE0J;EAAe,CAAC,GAAGlJ,iBAAiB;EAE5CN,gDAAS,CAAE,MAAM;IAChBoB,mBAAmB,CAAC,CAAC;IAErB,MAAMqI,yBAAyB,GAAGD,cAAc,CAAE,MAAM;MACvD9I,QAAQ,CAACW,aAAa,CAAE,WAAY,CAAC,EAAE6B,cAAc,CAAE;QACtDC,QAAQ,EAAE,QAAQ;QAClBC,KAAK,EAAE,QAAQ;QACfC,MAAM,EAAE;MACT,CAAE,CAAC;IACJ,CAAE,CAAC;IAEH,OAAO,MAAM;MACZ,IAAK,CAAE3C,QAAQ,CAACW,aAAa,CAAE5B,MAAM,CAAC6B,6BAA6B,CAAEL,KAAK,CAACpB,QAAQ,CAACD,EAAG,CAAE,CAAC,EAAE2B,OAAO,EAAG;QACrGmI,qBAAqB,CAAC,CAAC;QACvBjK,MAAM,CAACgC,mBAAmB,CAAC,CAAC;MAC7B;MAEAgI,yBAAyB,CAAC,CAAC;IAC5B,CAAC;EACF,CAAC,EAAE,CAAED,cAAc,CAAG,CAAC;AACxB,CAAC;AAED,MAAMpI,mBAAmB,GAAGA,CAAA,KAAM;EACjC,IAAK3B,MAAM,CAACiC,oBAAoB,CAAET,KAAK,CAACpB,QAAQ,CAACD,EAAG,CAAC,IAAIH,MAAM,CAACkC,4BAA4B,CAAEV,KAAK,CAACpB,QAAQ,CAACD,EAAG,CAAC,EAAG;IACnHgC,MAAM,CAACC,MAAM,GAAG,MAAM;MACrBC,UAAU,CAAC,CAAC;IACb,CAAC;EACF;EAEApB,QAAQ,CAACW,aAAa,CAAE,mEAAoE,CAAC,CAACU,gBAAgB,CAAE,QAAQ,EAAED,UAAW,CAAC;AACvI,CAAC;AAED,MAAMA,UAAU,GAAGA,CAAA,KAAM;EACxB6H,uBAAuB,CAAC,CAAC;EAEzB1I,KAAK,CAACqI,cAAc,CAACM,YAAY,CAChCC,4BAA4B,CAAC,CAC9B,CAAC,CAAC5D,IAAI,CAAIC,QAAQ,IAAM;IACvB,IAAKA,QAAQ,CAAC4D,MAAM,EAAG;MACtBC,kBAAkB,CAAE9I,KAAK,CAACpB,QAAQ,CAACD,EAAG,CAAC;IACxC,CAAC,MAAM;MACNH,MAAM,CAACuK,iBAAiB,CAAE/I,KAAK,CAACpB,QAAQ,CAACD,EAAG,CAAC;MAC7CH,MAAM,CAACwK,oBAAoB,CAAC,CAAC;IAC9B;EACD,CAAE,CAAC,CAACzD,KAAK,CAAEzC,OAAO,CAACC,KAAM,CAAC;AAC3B,CAAC;AAED,MAAM2F,uBAAuB,GAAGA,CAAA,KAAM;EACrC,IAAK,IAAI,KAAK1I,KAAK,CAACqI,cAAc,EAAG;IACpCrI,KAAK,CAACqI,cAAc,GAAG,IAAIY,MAAM,CAACC,QAAQ,CAACC,GAAG,CAACC,cAAc,CAAE;MAC9DC,WAAW,EAAEC,cAAc,CAAC;IAC7B,CAAE,CAAC;EACJ;AACD,CAAC;AAED,MAAMA,cAAc,GAAGA,CAAA,KAAM;EAC5B,OAAOtJ,KAAK,CAACpB,QAAQ,CAACwC,sBAAsB,CAACmI,GAAG;AACjD,CAAC;AAED,MAAMX,4BAA4B,GAAGA,CAAA,KAAM;EAC1C,OAAOY,MAAM,CAACC,MAAM,CACnB,CAAC,CAAC,EACFC,cAAc,CAAC,CAAC,EAChB;IACCC,qBAAqB,EAAE,CAAEC,wBAAwB,CAAC,CAAC;EACpD,CACD,CAAC;AACF,CAAC;AAED,MAAMF,cAAc,GAAGA,CAAA,KAAM;EAC5B,OAAO;IACNG,UAAU,EAAE,CAAC;IACbC,eAAe,EAAE;EAClB,CAAC;AACF,CAAC;AAED,MAAMF,wBAAwB,GAAGA,CAAA,KAAM;EACtC,OAAO;IACN/J,IAAI,EAAE,MAAM;IACZkK,UAAU,EAAE;MACXC,kBAAkB,EAAEC,yBAAyB,CAAC,CAAC;MAC/CC,mBAAmB,EAAErG,sBAAsB,CAAC,CAAC;MAC7CsG,sBAAsB,EAAE;IACzB;EACD,CAAC;AACF,CAAC;AAED,MAAMF,yBAAyB,GAAGA,CAAA,KAAM;EACvC,OAAOjK,KAAK,CAACpB,QAAQ,CAACwC,sBAAsB,CAACgJ,WAAW;AAEzD,CAAC;AACD,MAAMvG,sBAAsB,GAAGA,CAAA,KAAM;EACpC,OAAO7D,KAAK,CAACpB,QAAQ,CAACwC,sBAAsB,CAACiD,QAAQ;AACtD,CAAC;AAED,MAAMyE,kBAAkB,GAAGA,CAAA,KAAM;EAChCtK,MAAM,CAACwC,wBAAwB,CAAEhB,KAAK,CAACpB,QAAQ,CAACD,EAAG,CAAC;EAEpD,MAAM0L,MAAM,GAAGrK,KAAK,CAACqI,cAAc,CAACiC,YAAY,CAAE;IACjDC,WAAW,EAAEC,WAAW,CAAC,CAAC;IAC1BC,OAAO,EAAEA,CAAA,KAAM;MACdC,4BAA4B,CAAC,CAAC;IAC/B;EACD,CAAE,CAAC;EAEHjL,QAAQ,CAACW,aAAa,CAAE5B,MAAM,CAACgE,6BAA6B,CAAExC,KAAK,CAACpB,QAAQ,CAACD,EAAG,CAAE,CAAC,CAAC8D,MAAM,CAAE4H,MAAO,CAAC;AACrG,CAAC;AAED,MAAMG,WAAW,GAAGA,CAAA,KAAM;EACzB,OAAOxK,KAAK,CAACpB,QAAQ,CAACwC,sBAAsB,CAACC,YAAY;AAC1D,CAAC;AAED,MAAMqJ,4BAA4B,GAAGA,CAAA,KAAM;EAC1C,IAAKlM,MAAM,CAACkD,mBAAmB,CAAC,CAAC,EAAG;IACnCf,MAAM,CAAC1B,EAAE,CAAC0C,IAAI,CAACC,QAAQ,CAAEjB,MAAM,CAACkB,EAAE,CAACC,YAAY,CAACC,oBAAoB,CAAC,CAACC,uBAAuB,CAAC,CAAC;IAE/FvC,QAAQ,CAACW,aAAa,CAAE,YAAa,CAAC,EAAE6B,cAAc,CAAE;MACvDC,QAAQ,EAAE,QAAQ;MAClBC,KAAK,EAAE,QAAQ;MACfC,MAAM,EAAE;IACT,CAAE,CAAC;IAEH;EACD;EAEA5D,MAAM,CAACkE,YAAY,CAAC,CAAC;EAErB1C,KAAK,CAACC,KAAK,GAAGzB,MAAM,CAACyB,KAAK;EAC1B,MAAM0K,kBAAkB,GAAGC,2BAA2B,CAAC,CAAC;EAExD5K,KAAK,CAACqI,cAAc,CAACwC,eAAe,CAAEF,kBAAmB,CAAC,CAAC3F,IAAI,CAAIY,WAAW,IAAM;IACnFpH,MAAM,CAACyH,oBAAoB,CAAE;MAC5BR,QAAQ,EAAEb,IAAI,CAACC,SAAS,CAAED,IAAI,CAACU,KAAK,CAAEM,WAAW,CAACJ,iBAAiB,CAACsF,gBAAgB,CAACnF,KAAM,CAAE,CAAC;MAC9FG,cAAc,EAAEF,WAAW,CAACJ,iBAAiB,CAACuF,IAAI,CAACC,cAAc,CAACC;IACnE,CAAE,CAAC;IAEH,OAAOzM,MAAM,CAAC4J,UAAU,CAAC,CAAC;EAC3B,CAAE,CAAC,CAAC7C,KAAK,CAAEzC,OAAO,CAACC,KAAM,CAAC;AAC3B,CAAC;AAED,MAAM6H,2BAA2B,GAAGA,CAAA,KAAM;EACzC,MAAMD,kBAAkB,GAAGnB,MAAM,CAACC,MAAM,CAAC,CAAC,CAAC,EAAEC,cAAc,CAAC,CAAE,CAAC;EAC/DiB,kBAAkB,CAAChB,qBAAqB,GAAG,CAAEuB,oBAAoB,CAAC,CAAC,CAAE;EACrEP,kBAAkB,CAACQ,eAAe,GAAGC,wBAAwB,CAAC,CAAC;EAC/DT,kBAAkB,CAACU,YAAY,GAAG;IACjCC,UAAU,EAAEC,mBAAmB,CAAC,CAAC;IACjCC,YAAY,EAAEC,qBAAqB,CAAC;EACrC,CAAC;EAED,OAAOd,kBAAkB;AAC1B,CAAC;AAED,MAAMO,oBAAoB,GAAGA,CAAA,KAAM;EAClC,OAAO1B,MAAM,CAACC,MAAM,CACnB,CAAC,CAAC,EACFG,wBAAwB,CAAC,CAAC,EAC1B;IACC8B,yBAAyB,EAAEC,4BAA4B,CAAC;EACzD,CACD,CAAC;AACF,CAAC;AAED,MAAMA,4BAA4B,GAAGA,CAAA,KAAM;EAC1C,OAAO;IACN9L,IAAI,EAAE,iBAAiB;IACvBkK,UAAU,EAAE;MACX6B,OAAO,EAAE,gBAAgB;MACzBC,iBAAiB,EAAE7L,KAAK,CAACpB,QAAQ,CAACwC,sBAAsB,CAAC0K;IAC1D;EACD,CAAC;AACF,CAAC;AAED,MAAMV,wBAAwB,GAAGA,CAAA,KAAM;EACtC,OAAO;IACNW,gBAAgB,EAAE,OAAO;IACzBC,UAAU,EAAEhM,KAAK,CAACC,KAAK,CAACgE,MAAM,CAACC,QAAQ,CAAC,CAAC;IACzCT,YAAY,EAAEzD,KAAK,CAACC,KAAK,CAACyD;EAC3B,CAAC;AACF,CAAC;AAED,MAAM6H,mBAAmB,GAAGA,CAAA,KAAM;EACjC,OAAOvL,KAAK,CAACpB,QAAQ,CAACwC,sBAAsB,CAAC6K,kBAAkB;AAChE,CAAC;AAED,MAAMR,qBAAqB,GAAGA,CAAA,KAAM;EACnC,OAAOzL,KAAK,CAACpB,QAAQ,CAACwC,sBAAsB,CAAC8K,oBAAoB;AAClE,CAAC;AAED,MAAMzD,qBAAqB,GAAGA,CAAA,KAAM;EACnChJ,QAAQ,CAACW,aAAa,CAAE5B,MAAM,CAACgE,6BAA6B,CAAExC,KAAK,CAACpB,QAAQ,CAACD,EAAG,CAAE,CAAC,EAAE+H,MAAM,CAAC,CAAC;AAC9F,CAAC;;;;;;;;;;;;;;;;ACnNgE;AAEjE,MAAM0F,UAAU,GAAKC,QAAQ,IAAM;EAClC,OAAO5M,QAAQ,CAACW,aAAa,CAAEiM,QAAS,CAAC;AAC1C,CAAC;AAED,MAAMC,cAAc,GAAKD,QAAQ,IAAM;EACtC,OAAO5M,QAAQ,CAAC8M,gBAAgB,CAAEF,QAAS,CAAC;AAC7C,CAAC;AAED,MAAMG,QAAQ,GAAGA,CAAEC,OAAO,EAAEtL,SAAS,KAAM;EAC1CsL,OAAO,EAAEC,SAAS,CAACC,GAAG,CAAExL,SAAU,CAAC;EAEnC,OAAOsL,OAAO;AACf,CAAC;AAED,MAAMG,WAAW,GAAGA,CAAEH,OAAO,EAAEtL,SAAS,KAAM;EAC7CsL,OAAO,EAAEC,SAAS,CAAChG,MAAM,CAAEvF,SAAU,CAAC;EAEtC,OAAOsL,OAAO;AACf,CAAC;AAED,MAAMI,WAAW,GAAKJ,OAAO,IAAM;EAClC,IAAIA,OAAO,EAAEjF,KAAK,EAAE;IACnBiF,OAAO,CAACjF,KAAK,CAACsF,OAAO,GAAG,MAAM;EAC/B;EAEA,OAAOL,OAAO;AACf,CAAC;AAED,MAAMM,WAAW,GAAKN,OAAO,IAAM;EAClC,IAAIA,OAAO,EAAEjF,KAAK,EAAE;IACnBiF,OAAO,CAACjF,KAAK,CAACsF,OAAO,GAAG,EAAE;EAC3B;EAEA,OAAOL,OAAO;AACf,CAAC;AAED,IAAIO,MAAM,GAAG,CAAC,CAAC;AAER,MAAMxO,MAAM,GAAKK,aAAa,IAAM;EAC1CmO,MAAM,GAAGnO,aAAa;EAEtB,OAAO;IACN,GAAGoO,gBAAgB;IACnBhN,KAAK,EAAE+M,MAAM,CAAC/M;EACf,CAAC;AACF,CAAC;AAED,MAAMgN,gBAAgB,GAAG;EACxB;AACD;AACA;EACCvK,YAAY,EAAEA,CAAA,KAAM;IACnBuK,gBAAgB,CAACC,aAAa,CAAC,CAAC;IAEhC1I,KAAK,CAAEwI,MAAM,CAACG,YAAa,CAAC,CAC1BnI,IAAI,CAAIoI,GAAG,IAAMA,GAAG,CAAClI,IAAI,CAAC,CAAE,CAAC,CAC7BF,IAAI,CAAI6D,MAAM,IAAM;MACpBmE,MAAM,CAAC/M,KAAK,GAAG4I,MAAM,CAAC/I,OAAO;IAC9B,CAAE,CAAC,CACFyF,KAAK,CAAE,CAAE8H,KAAK,EAAEC,UAAU,EAAEC,WAAW,KAAM;MAC7CzK,OAAO,CAACqC,GAAG,CAAEoI,WAAY,CAAC;IAC3B,CAAE,CAAC,CACFC,OAAO,CAAE,MAAM;MACfP,gBAAgB,CAACQ,cAAc,CAAC,CAAC;IAClC,CAAE,CAAC;EACL,CAAC;EACD;AACD;AACA;AACA;AACA;EACCtH,2BAA2B,EAAEA,CAAA,KAAM;IAClC,OAAO,kDAAkD;EAC1D,CAAC;EAED;AACD;AACA;AACA;AACA;AACA;EACC3D,6BAA6B,EAAI7D,EAAE,IAAM;IACxC,OAAO,GAAG,GAAGA,EAAE,GAAG,cAAc;EACjC,CAAC;EAED;AACD;AACA;AACA;AACA;EACC0B,6BAA6B,EAAI1B,EAAE,IAAM;IACxC,OAAO,qEAAqE,GAAGA,EAAE,GAAG,IAAI;EACzF,CAAC;EAED;AACD;AACA;AACA;AACA;EACC+O,oCAAoC,EAAEA,CAAA,KAAM;IAC3C,OAAO,oFAAoF;EAC5F,CAAC;EAEDhN,4BAA4B,EAAI/B,EAAE,IAAM;IACvC,MAAMgP,IAAI,GAAG,CAAE,GAAGrB,cAAc,CAAE,+DAAgE,CAAC,CAAE;IACrG,MAAMV,OAAO,GAAGQ,UAAU,CAAEa,gBAAgB,CAAC5M,6BAA6B,CAAE1B,EAAG,CAAE,CAAC;IAClF,OAAOgP,IAAI,CAACC,QAAQ,CAAEhC,OAAQ,CAAC,IAAI+B,IAAI,CAAC5F,MAAM,KAAK,CAAC;EACrD,CAAC;EACDtH,oBAAoB,EAAI9B,EAAE,IAAM;IAC/B,OAAOc,QAAQ,CAACW,aAAa,CAAC,uBAAuB,CAAC,CAACR,KAAK,KAAKjB,EAAE;EACpE,CAAC;EAED;AACD;AACA;AACA;AACA;AACA;EACC6B,mBAAmB,EAAEA,CAAA,KAAM;IAC1B,MAAMqN,wBAAwB,GAAGzB,UAAU,CAAE,+EAAgF,CAAC,EAAExM,KAAK;IACrIgN,WAAW,CAAER,UAAU,CAAE,6BAA8B,CAAC,EAAE,WAAY,CAAC;IAEvE,IAAKY,MAAM,CAACc,IAAI,CAACF,QAAQ,CAAEC,wBAAyB,CAAC,EAAG;MACvDZ,gBAAgB,CAACjE,oBAAoB,CAAC,CAAC;MACvC;IACD;IACA,IAAK,CAAEgE,MAAM,CAACe,MAAM,CAACH,QAAQ,CAAEC,wBAAyB,CAAC,EAAG;MAC3DZ,gBAAgB,CAACnO,oBAAoB,CAAC,CAAC;MACvC;IACD;IAEA,MAAMkP,kBAAkB,GAAG5B,UAAU,CAAE,GAAG,GAAGyB,wBAAwB,GAAG,cAAe,CAAC;;IAExF;IACA,MAAMI,mBAAmB,GAAG7B,UAAU,CAAEa,gBAAgB,CAACS,oCAAoC,CAAC,CAAE,CAAC;;IAEjG;IACA,MAAMQ,oBAAoB,GAAGL,wBAAwB,KAAKzB,UAAU,CAAEa,gBAAgB,CAACS,oCAAoC,CAAC,CAAC,GAAG,UAAW,CAAC,EAAE9N,KAAK;;IAEnJ;IACA,IAAK,CAAEqO,mBAAmB,IAAIA,mBAAmB,IAAIC,oBAAoB,EAAG;MAC3E1B,QAAQ,CAAEwB,kBAAkB,EAAE,WAAY,CAAC;MAC3Cf,gBAAgB,CAACjE,oBAAoB,CAAC,CAAC;IACxC,CAAC,MAAM;MACN;MACA6D,WAAW,CAAEmB,kBAAmB,CAAC;MACjCf,gBAAgB,CAACnO,oBAAoB,CAAC,CAAC;IACxC;EACD,CAAC;EAED;AACD;AACA;EACCkK,oBAAoB,EAAEA,CAAA,KAAM;IAC3B6D,WAAW,CAAEL,QAAQ,CAAEJ,UAAU,CAAEa,gBAAgB,CAAC9G,2BAA2B,CAAC,CAAE,CAAC,EAAE,mCAAoC,CAAE,CAAC;EAC7H,CAAC;EAED;AACD;AACA;EACCrH,oBAAoB,EAAEA,CAAA,KAAM;IAC3BiO,WAAW,CAAEH,WAAW,CAAER,UAAU,CAAEa,gBAAgB,CAAC9G,2BAA2B,CAAC,CAAE,CAAC,EAAE,mCAAoC,CAAE,CAAC;EAChI,CAAC;EAED;AACD;AACA;AACA;AACA;EACCK,eAAe,EAAEA,CAAA,KAAM;IACtB,OAAO,uDAAuD;EAC/D,CAAC;EAED2H,kBAAkB,EAAEA,CAAExP,EAAE,EAAEsM,IAAI,EAAErL,KAAK,KAAM;IAC1C,IAAIwO,YAAY,GAAK3O,QAAQ,CAACC,cAAc,CAAEf,EAAE,GAAG,GAAG,GAAGsM,IAAK,CAAG;IAEjE,IAAK,CAAEmD,YAAY,EAAG;MACrBA,YAAY,GAAG3O,QAAQ,CAACyB,aAAa,CAAE,OAAQ,CAAC;MAChDkN,YAAY,CAACzP,EAAE,GAAGA,EAAE,GAAG,GAAG,GAAGsM,IAAI;MACjCmD,YAAY,CAACnD,IAAI,GAAGtM,EAAE,GAAG,GAAG,GAAGsM,IAAI,GAAG,GAAG;MACzCmD,YAAY,CAACvO,IAAI,GAAG,QAAQ;MAC5BuM,UAAU,CAAEa,gBAAgB,CAACzG,eAAe,CAAC,CAAE,CAAC,CAAC6H,WAAW,CAAED,YAAa,CAAC;IAC7E;IAEAA,YAAY,CAACxO,KAAK,GAAGA,KAAK;EAC3B,CAAC;EAED;AACD;AACA;AACA;AACA;EACCoB,wBAAwB,EAAIrC,EAAE,IAAM;IACnC,MAAM2P,EAAE,GAAG7O,QAAQ,CAACyB,aAAa,CAAE,KAAM,CAAC;IAC1CoN,EAAE,CAAC3P,EAAE,GAAGsO,gBAAgB,CAACzK,6BAA6B,CAAE7D,EAAG,CAAC,CAAC4P,OAAO,CAAE,GAAG,EAAE,EAAG,CAAC;IAC/ED,EAAE,CAACnN,SAAS,GAAG,iBAAiB,GAAGxC,EAAE,GAAG,cAAc;IAEtD,MAAM6P,IAAI,GAAGpC,UAAU,CAAEa,gBAAgB,CAAC9G,2BAA2B,CAAC,CAAE,CAAC;IACzEqI,IAAI,EAAEC,UAAU,CAACC,YAAY,CAAEJ,EAAE,EAAEE,IAAI,CAACG,WAAY,CAAC;IACrD;IACA1B,gBAAgB,CAACzM,mBAAmB,CAAE7B,EAAG,CAAC;EAC3C,CAAC;EAED;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACCyJ,UAAU,EAAEA,CAAA,KAAM;IACjB,IAAI;MACH,MAAMlC,cAAc,GAAGkG,UAAU,CAAEa,gBAAgB,CAAC9G,2BAA2B,CAAC,CAAE,CAAC;MACnF,IAAKD,cAAc,EAAG;QACrBA,cAAc,CAACE,KAAK,CAAC,CAAC;QACtB;MACD;IACD,CAAC,CAAC,OAAQ5E,CAAC,EAAG;MACb;IAAA;IAGD4K,UAAU,CAAEa,gBAAgB,CAACzG,eAAe,CAAC,CAAE,CAAC,CAACC,MAAM,CAAC,CAAC;EAC1D,CAAC;EAED;AACD;AACA;AACA;AACA;AACA;AACA;EACCmI,gBAAgB,EAAI9O,OAAO,IAAM;IAChC,MAAMyH,IAAI,GAAG6E,UAAU,CAAEa,gBAAgB,CAACzG,eAAe,CAAC,CAAE,CAAC;;IAE7D;IACA4F,UAAU,CAAE,6HAA8H,CAAC,EAAE1F,MAAM,CAAC,CAAC;IAErJ,IAAK,CAAC,CAAC,KAAK5G,OAAO,CAAC+O,OAAO,CAAE,mBAAoB,CAAC,EAAG;MACpD/O,OAAO,GAAG,oCAAoC,GAAGA,OAAO,GAAG,YAAY;IACxE;IACAyH,IAAI,EAAEuH,OAAO,CAAE,kHAAkH,GAAGhP,OAAO,GAAG,QAAS,CAAC;IAExJsM,UAAU,CAAE,YAAa,CAAC,CAAC2C,OAAO,CAAE;MACnCC,SAAS,EAAIzH,IAAI,CAAC0H,SAAS,GAAG;IAC/B,CAAC,EAAE,IAAK,CAAC;IAEThC,gBAAgB,CAACQ,cAAc,CAAC,CAAC;IAEjChO,QAAQ,CAACkF,IAAI,CAACuK,aAAa,CAAE,IAAIC,KAAK,CAAE,gBAAiB,CAAE,CAAC;EAC7D,CAAC;EAED;AACD;AACA;AACA;AACA;AACA;AACA;EACCjC,aAAa,EAAEA,CAAA,KAAM;IACpB,MAAMkC,KAAK,GAAGhD,UAAU,CAAEa,gBAAgB,CAACzG,eAAe,CAAC,CAAE,CAAC;IAC9D,MAAM6I,SAAS,GAAGD,KAAK,CAACzN,IAAI,GAAG,CAAC;IAChC,IAAK,CAAC,KAAK0N,SAAS,GAAG,mBAAmB,CAAC,EAAG;MAC7CD,KAAK,CAACjN,KAAK,GACV;QACCrC,OAAO,EAAE,IAAI;QACbwP,UAAU,EAAE;UACXC,UAAU,EAAE,MAAM;UAClBC,OAAO,EAAE;QACV;MACD,CACD,CAAC;IACF;EACD,CAAC;EAED;AACD;AACA;AACA;AACA;EACC/B,cAAc,EAAEA,CAAA,KAAM;IACrBrB,UAAU,CAAEa,gBAAgB,CAACzG,eAAe,CAAC,CAAE,CAAC,EAAEiJ,OAAO,GAAG,CAAC;EAC9D,CAAC;EACD1G,iBAAiB,EAAIpK,EAAE,IAAM;IAC5B,MAAM+Q,cAAc,GAAGvD,+EAAiB,CAAC,CAAC;IAC1C,OAAOuD,cAAc,CAAE/Q,EAAE,CAAE;IAE3BgC,MAAM,CAAC1B,EAAE,CAAC0C,IAAI,CAACC,QAAQ,CAAEjB,MAAM,CAACkB,EAAE,CAACC,YAAY,CAAC6N,iBAAiB,CAAC,CAACC,sCAAsC,CAAEjR,EAAG,CAAC;EAChH,CAAC;EACD;AACD;AACA;AACA;EACCsH,oBAAoB,EAAItE,IAAI,IAAM;IACjChB,MAAM,CAAC1B,EAAE,CAAC0C,IAAI,CAACC,QAAQ,CAAEjB,MAAM,CAACkB,EAAE,CAACC,YAAY,CAAC6N,iBAAkB,CAAC,CAACE,8BAA8B,CAAElO,IAAK,CAAC;EAC3G,CAAC;EACDmO,YAAY,EAAEA,CAAE;IAAEhQ,OAAO;IAAEiQ,OAAO,GAAG,eAAe;IAAEC,EAAE,GAAG;EAAK,CAAC,KAAM;IACtErP,MAAM,CAAC1B,EAAE,CAAC0C,IAAI,CAACC,QAAQ,CAAE,cAAe,CAAC,CAACqO,gBAAgB,CAAEnQ,OAAO,EAAE;MACpEiQ;IACD,CAAE,CAAC;IAEHC,EAAE,GAAG,CAAC;EACP,CAAC;EACDE,aAAa,EAAEA,CAAE;IAAEpQ,OAAO;IAAEiQ,OAAO,GAAG,eAAe;IAAEC,EAAE,GAAG;EAAK,CAAC,KAAM;IACvErP,MAAM,CAAC1B,EAAE,CAAC0C,IAAI,CAACC,QAAQ,CAAE,cAAe,CAAC,CAACuO,iBAAiB,CAAErQ,OAAO,EAAE;MACrEiQ;IACD,CAAE,CAAC;IAEHC,EAAE,GAAG,CAAC;EACP,CAAC;EACDtO,mBAAmB,EAAEA,CAAA,KAAM;IAC1B,OAAOf,MAAM,CAAC1B,EAAE,CAAC0C,IAAI,CAACyO,MAAM,CAAEzP,MAAM,CAACkB,EAAE,CAACC,YAAY,CAACC,oBAAqB,CAAC,CAACL,mBAAmB,CAAC,CAAC;EAClG;AACD,CAAC;;;;;;;;;;;;;;;;;AC7TkD;AACH;AAEzC,MAAM2O,oBAAoB,GAAGA,CAAE;EAAE1R;AAAG,CAAC,KAAM;EACjD,MAAMC,QAAQ,GAAGL,iEAAU,CAAEI,EAAE,GAAG,OAAO,EAAE,CAAC,CAAE,CAAC;EAC/C,MAAMH,MAAM,GAAGC,+CAAS,CAAEG,QAAQ,CAACC,aAAc,CAAC;EAClDL,MAAM,CAACM,oBAAoB,CAAC,CAAC;AAC9B,CAAC;;;;;;;;;;;;;;;;;;;;;ACPkD;AACQ;AACzB;AACqB;AAEvD,MAAMkB,KAAK,GAAG;EACbpB,QAAQ,EAAE,IAAI;EACd2R,QAAQ,EAAE,IAAI;EACdC,aAAa,EAAE;AAChB,CAAC;AAED,IAAIhS,MAAM,GAAG,CAAC,CAAC;AACR,MAAMiS,mBAAmB,GAAKrR,KAAK,IAAM;EAC/C,MAAM;IAAET,EAAE;IAAE4R,QAAQ;IAAElR;EAAkB,CAAC,GAAGD,KAAK;EACjDY,KAAK,CAACuQ,QAAQ,GAAGA,QAAQ;EAEzB,MAAM3R,QAAQ,GAAGL,iEAAU,CAAEI,EAAE,GAAG,OAAO,EAAE,CAAC,CAAE,CAAC;EAC/CH,MAAM,GAAGC,0DAAS,CAAEG,QAAQ,CAACC,aAAc,CAAC;EAE5CmB,KAAK,CAACpB,QAAQ,GAAGA,QAAQ;EACzBoB,KAAK,CAAC0Q,YAAY,GAAG9R,QAAQ,CAAC8R,YAAY;EAE1C,MAAM;IAAEnI;EAAe,CAAC,GAAGlJ,iBAAiB;EAE5CN,gDAAS,CAAE,MAAM;IAChB4B,MAAM,CAACC,MAAM,GAAG,MAAM;MACrBT,mBAAmB,CAAC,CAAC;IACtB,CAAC;IAED,MAAMqI,yBAAyB,GAAGD,cAAc,CAAE,MAAM;MACvDoI,mBAAmB,CAAC,CAAC;MACrBC,iCAAiC,CAAC,CAAC;IACpC,CAAE,CAAC;IAEH,OAAO,MAAM;MACZpI,yBAAyB,CAAC,CAAC;IAC5B,CAAC;EACF,CAAC,EAAE,CAAED,cAAc,CAAG,CAAC;EAEvB,MAAM;IAAEsI;EAAsB,CAAC,GAAGlQ,MAAM,CAACkB,EAAE,CAACiP,cAAc;EAE1D,OAAO5P,oDAAA,CAAC2P,qBAAqB;IAACd,OAAO,EAAC;EAAe,CAAE,CAAC;AACzD,CAAC;AAED,MAAM5P,mBAAmB,GAAGA,CAAA,KAAM;EACjC;EACAV,QAAQ,CAACW,aAAa,CAAE5B,MAAM,CAAC2H,2BAA2B,CAAC,CAAE,CAAC,CAACrF,gBAAgB,CAAE,OAAO,EAAIU,CAAC,IAAM;IAClG,IAAK/B,QAAQ,CAACW,aAAa,CAAE5B,MAAM,CAACkP,oCAAoC,CAAC,CAAE,CAAC,EAAG;MAC9ElM,CAAC,CAACC,cAAc,CAAC,CAAC;MAClBD,CAAC,CAACuP,wBAAwB,CAAC,CAAC;MAE5BC,gBAAgB,CAAC,CAAC;IACnB;EACD,CAAE,CAAC;AACJ,CAAC;AAED,MAAMC,4BAA4B,GAAGA,CAAA,KAAM;EAC1C,MAAM3C,EAAE,GAAG7O,QAAQ,CAACW,aAAa,CAAE5B,MAAM,CAAC2H,2BAA2B,CAAC,CAAE,CAAC;EACzE,MAAM+K,IAAI,GAAGzR,QAAQ,CAACyB,aAAa,CAAE,MAAO,CAAC;EAC7CgQ,IAAI,CAACvS,EAAE,GAAG,6BAA6B;EACvCuS,IAAI,CAACxE,SAAS,CAACC,GAAG,CAAC,6BAA6B,CAAC;EACjD2B,EAAE,CAACD,WAAW,CAAE6C,IAAK,CAAC;AACvB,CAAC;AAED,MAAMN,iCAAiC,GAAGA,CAAA,KAAM;EAC/CnR,QAAQ,CAACW,aAAa,CAAE,8BAA+B,CAAC,EAAEsG,MAAM,CAAC,CAAC;AACnE,CAAC;AAED,MAAMyK,iBAAiB,GAAGA,CAAA,KAAM;EAC/B1R,QAAQ,CAACW,aAAa,CAAE5B,MAAM,CAACgI,eAAe,CAAC,CAAE,CAAC,CAACkG,SAAS,CAACC,GAAG,CAAE,6CAA8C,CAAC;EACjHlN,QAAQ,CAAC8M,gBAAgB,CAAG,GAAG/N,MAAM,CAACgI,eAAe,CAAC,CAAG,MAAM,CAAC,CAAC4K,OAAO,CAAIC,KAAK,IAAM;IACtFA,KAAK,CAAC7J,KAAK,CAAC8J,aAAa,GAAG,MAAM;EACnC,CAAC,CAAC;AACH,CAAC;AACD,MAAMX,mBAAmB,GAAGA,CAAA,KAAM;EACjClR,QAAQ,CAACW,aAAa,CAAE5B,MAAM,CAACgI,eAAe,CAAC,CAAE,CAAC,CAACkG,SAAS,CAAChG,MAAM,CAAE,6CAA8C,CAAC;EACpHjH,QAAQ,CAAC8M,gBAAgB,CAAG,GAAG/N,MAAM,CAACgI,eAAe,CAAC,CAAG,MAAM,CAAC,CAAC4K,OAAO,CAAIC,KAAK,IAAM;IACtFA,KAAK,CAAC7J,KAAK,CAAC8J,aAAa,GAAG,EAAE;EAC/B,CAAC,CAAC;AACH,CAAC;AAED,MAAMpB,aAAa,GAAKpQ,OAAO,IAAM;EACpCtB,MAAM,CAAC0R,aAAa,CAAE;IACrBpQ,OAAO;IACPkQ,EAAE,EAAEA,CAAA,KAAM;MACTY,iCAAiC,CAAC,CAAC;MACnCD,mBAAmB,CAAC,CAAC;IACtB;EACD,CAAE,CAAC;AACJ,CAAC;AAED,MAAMK,gBAAgB,GAAGA,CAAA,KAAM;EAC9B,IAAKxS,MAAM,CAACkD,mBAAmB,CAAC,CAAC,EAAG;IACnCkP,iCAAiC,CAAC,CAAC;IACnCD,mBAAmB,CAAC,CAAC;IAErBlR,QAAQ,CAACW,aAAa,CAAE,YAAa,CAAC,CAAC6B,cAAc,CAAE;MACtDC,QAAQ,EAAE,QAAQ;MAClBC,KAAK,EAAE,QAAQ;MACfC,MAAM,EAAE;IACT,CAAE,CAAC;IAEH;EACD;EAEA,IAAKpC,KAAK,CAACpB,QAAQ,CAAC2S,eAAe,CAACC,kBAAkB,EAAG;IACxDhT,MAAM,CAACkE,YAAY,CAAC,CAAC;IACrBuO,4BAA4B,CAAC,CAAC;IAC9BE,iBAAiB,CAAC,CAAC;IACnBb,oEAAY,CAAE;MACbtQ,KAAK;MACLxB,MAAM;MACN0R,aAAa;MACb9H,UAAU,EAAEA,CAAA,KAAM;QACjB,MAAM5C,iBAAiB,GAAG7E,MAAM,CAAC1B,EAAE,CAAC0C,IAAI,CAACyO,MAAM,CAAEzP,MAAM,CAACkB,EAAE,CAACC,YAAY,CAAC6N,iBAAkB,CAAC,CAAC8B,oBAAoB,CAAC,CAAC;QAClHjM,iBAAiB,CAACgL,aAAa,GAAGxQ,KAAK,CAACwQ,aAAa;QAErDhS,MAAM,CAACyH,oBAAoB,CAAET,iBAAkB,CAAC;QAEhDxF,KAAK,CAACuQ,QAAQ,CAAC,CAAC;MACjB;IACD,CAAE,CAAC;EACJ,CAAC,MAAM;IACNvQ,KAAK,CAACuQ,QAAQ,CAAC,CAAC;EACjB;AACD,CAAC;;;;;;;;;;;;;;AC7HD,MAAMmB,0BAA0B,GAAGA,CAAA,KAAM;EACxC,OAAOjS,QAAQ,CAACW,aAAa,CAAE,oEAAqE,CAAC,EAAEE,OAAO;AAC/G,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA,MAAMqR,yBAAyB,GAAGA,CAAA,KAAM;EACvC,OAAO;IACNC,cAAc,EAAEnS,QAAQ,CAACW,aAAa,CAAE,oBAAqB,CAAC,EAAER,KAAK;IACrEiS,cAAc,EAAEpS,QAAQ,CAACW,aAAa,CAAE,oBAAqB,CAAC,EAAER,KAAK;IACrEkS,IAAI,EAAErS,QAAQ,CAACW,aAAa,CAAE,eAAgB,CAAC,EAAER,KAAK;IACtDI,KAAK,EAAEP,QAAQ,CAACW,aAAa,CAAE,sBAAuB,CAAC,EAAER,KAAK;IAC9DmS,UAAU,EAAEtS,QAAQ,CAACW,aAAa,CAAE,mBAAoB,CAAC,EAAER,KAAK;IAChEoS,OAAO,EAAEvS,QAAQ,CAACW,aAAa,CAAE,wBAAyB,CAAC,EAAER;EAC9D,CAAC;AACF,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA,MAAMqS,0BAA0B,GAAGA,CAAA,KAAM;EACxC,OAAO;IACNL,cAAc,EAAEnS,QAAQ,CAACW,aAAa,CAAE,qBAAsB,CAAC,EAAER,KAAK;IACtEiS,cAAc,EAAEpS,QAAQ,CAACW,aAAa,CAAE,qBAAsB,CAAC,EAAER,KAAK;IACtEkS,IAAI,EAAErS,QAAQ,CAACW,aAAa,CAAE,gBAAiB,CAAC,EAAER,KAAK;IACvDI,KAAK,EAAEP,QAAQ,CAACW,aAAa,CAAE,uBAAwB,CAAC,EAAER,KAAK;IAC/DmS,UAAU,EAAEtS,QAAQ,CAACW,aAAa,CAAE,oBAAqB,CAAC,EAAER,KAAK;IACjEoS,OAAO,EAAEvS,QAAQ,CAACW,aAAa,CAAE,yBAA0B,CAAC,EAAER;EAC/D,CAAC;AACF,CAAC;;AAED;AACA;AACA;AACA,MAAMsS,iBAAiB,GAAGA,CAAA,KAAM;EAC/BvR,MAAM,CAACwR,MAAM,CAACC,WAAW,CAAE;IAAEzQ,IAAI,EAAE;MAAE,aAAa,EAAC;IAAI,CAAC;IAAEuB,KAAK,EAAE;EAAwB,CAAC,EAAEvC,MAAM,CAAC0R,QAAQ,CAACC,MAAO,CAAC;AACrH,CAAC;;AAED;AACA;AACA;AACO,MAAMhC,YAAY,GAAGA,CAAE;EAAEtQ,KAAK;EAAExB,MAAM;EAAE0R,aAAa;EAAE9H;AAAW,CAAC,KAAM;EAAA,IAAAmK,qBAAA;EAC/E/T,MAAM,CAAC0O,aAAa,CAAC,CAAC;EACtBlN,KAAK,CAACpB,QAAQ,CAACC,aAAa,CAACoB,KAAK,GAAGzB,MAAM,CAACyB,KAAK;EAEjD,MAAMuS,aAAa,GAAGxS,KAAK,CAACwS,aAAa,GAAG5N,IAAI,CAACC,SAAS,CAAE7E,KAAK,CAACwS,aAAc,CAAC,GAAG,IAAI;EACxF,MAAMC,SAAS,IAAAF,qBAAA,GAAG9S,QAAQ,CAACW,aAAa,CAAE5B,MAAM,CAACkP,oCAAoC,CAAC,CAAE,CAAC,EAAE9N,KAAK,cAAA2S,qBAAA,cAAAA,qBAAA,GAAI,KAAK;EAEzGvL,cAAc,CAAC0L,YAAY,CAACC,YAAY,CAAE3S,KAAK,CAAC0Q,YAAY,CAACkC,kBAAkB,EAAE;IAChFJ,aAAa;IACbC,SAAS;IACTxS,KAAK,EAAE;MACNtB,EAAE,EAAEqB,KAAK,CAACpB,QAAQ,CAACC,aAAa,CAACoB,KAAK,CAACtB,EAAE;MACzCsF,MAAM,EAAEjE,KAAK,CAACpB,QAAQ,CAACC,aAAa,CAACoB,KAAK,CAACgE,MAAM;MACjDP,QAAQ,EAAE1D,KAAK,CAACpB,QAAQ,CAACC,aAAa,CAACoB,KAAK,CAACyD;IAC9C;EACD,CAAC,CAAC,CACDsB,IAAI,CAAI6N,gBAAgB,IAAM;IAC9B,IAAKA,gBAAgB,CAAC9P,KAAK,EAAG;MAC7BmN,aAAa,CAAE2C,gBAAgB,CAAC/S,OAAQ,CAAC;MACzC,OAAO,KAAK;IACb;IAEA,IAAK,cAAc,KAAK+S,gBAAgB,CAACC,MAAM,IAAI,KAAK,KAAKD,gBAAgB,CAACE,cAAc,EAAG;MAC9F7C,aAAa,CAAE,qCAAsC,CAAC;MAEtD,OAAO,KAAK;IACb;IAEA,IAAK,cAAc,KAAK2C,gBAAgB,CAACC,MAAM,IAAI,KAAK,KAAKD,gBAAgB,CAACE,cAAc,EAAG;MAC9F3K,UAAU,CAAC,CAAC;MAEZ,OAAO,IAAI;IACZ;IAEA,MAAM4K,YAAY,GAAG,CAAEtB,0BAA0B,CAAC,CAAC;IACnD,MAAM1G,cAAc,GAAG2G,yBAAyB,CAAC,CAAC;IAClD,MAAMsB,eAAe,GAAGD,YAAY,GAAGhI,cAAc,GAAGiH,0BAA0B,CAAC,CAAC;IAEpFjL,cAAc,CAAC0L,YAAY,CAACQ,sBAAsB,CAAElT,KAAK,CAAC0Q,YAAY,CAACyC,yBAAyB,EAAE;MACjGX,aAAa;MACbC,SAAS;MACTI,gBAAgB,EAAEA,gBAAgB;MAClCO,eAAe,EAAE;QAChBC,UAAU,EAAErM,cAAc,CAAC0L,YAAY,CAACY,mBAAmB,CAACC,eAAe;QAC3EC,WAAW,EAAE;MACd,CAAC;MACDvT,KAAK,EAAE;QACNtB,EAAE,EAAEqB,KAAK,CAACpB,QAAQ,CAACC,aAAa,CAACoB,KAAK,CAACtB,EAAE;QACzCsF,MAAM,EAAEjE,KAAK,CAACpB,QAAQ,CAACC,aAAa,CAACoB,KAAK,CAACgE,MAAM;QACjDP,QAAQ,EAAE1D,KAAK,CAACpB,QAAQ,CAACC,aAAa,CAACoB,KAAK,CAACyD,QAAQ;QACrDsH,cAAc,EAAEA,cAAc;QAC9BiI,eAAe,EAAEA,eAAe;QAChCQ,qBAAqB,EAAET,YAAY;QACnCU,aAAa,EAAEjU,QAAQ,CAACW,aAAa,CAAE,sDAAuD,CAAC,CAACR;MACjG;IACD,CAAC,CAAC,CACDoF,IAAI,CAAI2O,kBAAkB,IAAM;MAChC,IAAKA,kBAAkB,CAAC5Q,KAAK,EAAG;QAC/BmN,aAAa,CAAEyD,kBAAkB,CAAC7T,OAAQ,CAAC;QAE3C,OAAO,KAAK;MACb;MAEA,MAAM0Q,aAAa,GAAGmD,kBAAkB,CAACC,mBAAmB,IAAID,kBAAkB,CAACE,SAAS,CAAC5O,QAAQ,CAACtD,IAAI,CAACmS,oBAAoB,IAAIjB,gBAAgB,CAACe,mBAAmB;MACvKpV,MAAM,CAAC2P,kBAAkB,CAAEnO,KAAK,CAACpB,QAAQ,CAACD,EAAE,EAAE,eAAe,EAAE6R,aAAc,CAAC;MAE9ExQ,KAAK,CAACwQ,aAAa,GAAGA,aAAa;MAEnCpI,UAAU,CAAC,CAAC;MAEZ,OAAO,IAAI;IACZ,CAAC,CAAC,CACD7C,KAAK,CAAIxC,KAAK,IAAM;MACpBD,OAAO,CAACC,KAAK,CAAEA,KAAM,CAAC;MACtBD,OAAO,CAACC,KAAK,CAAEA,KAAK,CAACgR,OAAQ,CAAC;MAE9B7D,aAAa,CAAE,kDAAmD,CAAC;MAEnE,OAAO,KAAK;IACb,CAAC,CAAC;EACH,CAAC,CAAC,CACD3K,KAAK,CAAIxC,KAAK,IAAM;IACpBD,OAAO,CAACC,KAAK,CAAEA,KAAM,CAAC;IACtBD,OAAO,CAACC,KAAK,CAAEA,KAAK,CAACgR,OAAQ,CAAC;IAE9B7D,aAAa,CAAE,kDAAmD,CAAC;IAEnE,OAAO,KAAK;EACb,CAAC,CAAC;EAGFzQ,QAAQ,CAACqB,gBAAgB,CAAE,OAAO,EAAIU,CAAC,IAAM;IAC5C,IAAKA,CAAC,CAACwS,MAAM,CAACC,OAAO,CAAE,wCAAyC,CAAC,EAAG;MACnE/B,iBAAiB,CAAC,CAAC;IACpB;EACD,CAAE,CAAC;EAEH,OAAO,KAAK;AACb,CAAC;;;;;;;;;;;;;;;;AChJ8E;AACA;AAExE,MAAMgC,cAAc,GAAG;EAC7B/U,eAAe;EACfY,eAAeA,yFAAAA;AAChB,CAAC;;;;;;;;;;;;;;;;;;;;;ACNkD;AACQ;AACzB;AACiC;AAEnE,MAAMC,KAAK,GAAG;EACbpB,QAAQ,EAAE,IAAI;EACduV,QAAQ,EAAE,IAAI;EACd3B,aAAa,EAAE,IAAI;EACnB4B,YAAY,EAAE,IAAI;EAClB5D,aAAa,EAAE;AAChB,CAAC;AAED,IAAIhS,MAAM,GAAG,CAAC,CAAC;AACR,MAAM6V,UAAU,GAAKjV,KAAK,IAAM;EACtC,MAAM;IAAET,EAAE;IAAEU;EAAkB,CAAC,GAAGD,KAAK;EAEvC,MAAMR,QAAQ,GAAGL,iEAAU,CAAEI,EAAE,GAAG,OAAO,EAAE,CAAC,CAAE,CAAC;EAC/C,MAAM2V,aAAa,GAAG9K,MAAM,CAAC+K,OAAO,CAAE3V,QAAQ,CAAC4V,qBAAsB,CAAC;EACtE,MAAM;IAAE3D;EAAsB,CAAC,GAAGlQ,MAAM,CAACkB,EAAE,CAACiP,cAAc;EAE1DtS,MAAM,GAAGC,0DAAS,CAAEG,QAAQ,CAACC,aAAc,CAAC;EAE5CmB,KAAK,CAACpB,QAAQ,GAAGA,QAAQ;EACzBoB,KAAK,CAACoU,YAAY,GAAGxV,QAAQ,CAAC4V,qBAAqB;EACnDxU,KAAK,CAAC0Q,YAAY,GAAG9R,QAAQ,CAAC8R,YAAY;EAE1C,MAAM;IAAEnI;EAAe,CAAC,GAAGlJ,iBAAiB;EAE5CN,gDAAS,CAAE,MAAM;IAChBoB,mBAAmB,CAAC,CAAC;IAErB,MAAMZ,WAAW,GAAGgJ,cAAc,CAAE,MAAM;MACzCoI,mBAAmB,CAAC,CAAC;MACrB8D,6BAA6B,CAAC,CAAC;IAChC,CAAE,CAAC;IAEH,OAAO,MAAM;MACZ,IAAK,CAAEhV,QAAQ,CAACW,aAAa,CAAE5B,MAAM,CAAC6B,6BAA6B,CAAEL,KAAK,CAACpB,QAAQ,CAACD,EAAG,CAAE,CAAC,EAAE2B,OAAO,EAAG;QACrGb,QAAQ,CAACW,aAAa,CAAE5B,MAAM,CAACgE,6BAA6B,CAAExC,KAAK,CAACpB,QAAQ,CAACD,EAAG,CAAE,CAAC,EAAE+H,MAAM,CAAC,CAAC;QAC7FlI,MAAM,CAACM,oBAAoB,CAAC,CAAC;MAC9B;MAEAS,WAAW,CAAC,CAAC;IACd,CAAC;EACF,CAAC,EAAE,CAAEgJ,cAAc,CAAG,CAAC;EAEvB,OACCrH,oDAAA,CAAA2F,2CAAA,QACC3F,oDAAA;IAAKwT,uBAAuB,EAAE;MAAEC,MAAM,EAAE3U,KAAK,CAACpB,QAAQ,CAACgW;IAAsB;EAAE,CAAE,CAAC,EAEjFN,aAAa,CAACO,GAAG,CAAIC,KAAK,IACzB5T,oDAAA,CAAC6T,YAAY;IAACpW,EAAE,EAAGA,EAAI;IAACmW,KAAK,EAAGA,KAAK,CAAC,CAAC,CAAG;IAACE,GAAG,EAAGF,KAAK,CAAC,CAAC;EAAG,CAAE,CAC9D,CAAC,EAEF5T,oDAAA,CAAC2P,qBAAqB;IAACd,OAAO,EAAC;EAAe,CAAE,CAC/C,CAAC;AAEL,CAAC;AAED,MAAMgF,YAAY,GAAK3V,KAAK,IAAM;EACjC,MAAM;IAAET,EAAE;IAAEmW;EAAM,CAAC,GAAG1V,KAAK;EAE3B,OACC8B,oDAAA;IAAKC,SAAS,EAAI,kBAAiBxC,EAAG,IAAGmW,KAAK,CAACG,KAAM;EAAG,GACvD/T,oDAAA;IAAOgU,OAAO,EAAI,GAAEvW,EAAG,IAAGmW,KAAK,CAACG,KAAM;EAAG,GACtCH,KAAK,CAAC/Q,KAAK,EACb7C,oDAAA;IAAMC,SAAS,EAAC;EAAU,GAAC,GAAO,CAC5B,CAAC,EACRD,oDAAA;IAAKvC,EAAE,EAAG,GAAEA,EAAG,IAAGmW,KAAK,CAACG,KAAM;EAAE,CAAM,CAClC,CAAC;AAER,CAAC;AAED,MAAM9U,mBAAmB,GAAGA,CAAA,KAAM;EACjC;EACAV,QAAQ,CAACW,aAAa,CAAE,oCAAqC,CAAC,EAAEU,gBAAgB,CAAE,OAAO,EAAIU,CAAC,IAAM;IAClG,IAAKA,CAAC,CAACwS,MAAM,CAACC,OAAO,CAAE,qCAAsC,CAAC,EAAG;MAChEzV,MAAM,CAACgC,mBAAmB,CAAC,CAAC;IAC7B;EACD,CACD,CAAC;EAEDf,QAAQ,CAACkF,IAAI,CAAC7D,gBAAgB,CAAE,gBAAgB,EAAE,MAAM;IACvDrB,QAAQ,CAACW,aAAa,CAAC,qCAAqC,CAAC,EAAEsG,MAAM,CAAC,CAAC;EACxE,CAAE,CAAC;;EAGH;EACAjH,QAAQ,CAACqB,gBAAgB,CAAE,uCAAuC,EAAEqU,mBAAoB,CAAC;EACzF1V,QAAQ,CAACqB,gBAAgB,CAAE,sCAAsC,EAAE,CAAEoC,KAAK,EAAEpD,OAAO,KAAM;IACxFtB,MAAM,CAACoQ,gBAAgB,CAAE9O,OAAQ,CAAC;EACnC,CAAE,CAAC;EAEH,IAAKtB,MAAM,CAACiC,oBAAoB,CAAET,KAAK,CAACpB,QAAQ,CAACD,EAAG,CAAC,IAAIH,MAAM,CAACkC,4BAA4B,CAAEV,KAAK,CAACpB,QAAQ,CAACD,EAAG,CAAC,EAAG;IACnHgC,MAAM,CAACC,MAAM,GAAG,MAAM;MACrBuU,mBAAmB,CAAC,CAAC;IACtB,CAAC;EACF;;EAEA;EACA1V,QAAQ,CAACW,aAAa,CAAE,+DAAgE,CAAC,CAACU,gBAAgB,CAAE,QAAQ,EAAEqU,mBAAoB,CAAC;AAC5I,CAAC;AAED,MAAMA,mBAAmB,GAAGA,CAAA,KAAM;EACjC,MAAMjO,aAAa,GAAGlH,KAAK,CAACpB,QAAQ,CAAC2S,eAAe;EACpD,IAAKrK,aAAa,CAACnE,KAAK,EAAG;IAC1BmN,aAAa,CAAEhJ,aAAa,CAACpH,OAAQ,CAAC;EACvC;;EAEA;EACA;EACA,IAAK,CAAEL,QAAQ,CAACW,aAAa,CAAE5B,MAAM,CAACgE,6BAA6B,CAAExC,KAAK,CAACpB,QAAQ,CAACD,EAAG,CAAE,CAAC,EAAG;IAC5FH,MAAM,CAACwC,wBAAwB,CAAEhB,KAAK,CAACpB,QAAQ,CAACD,EAAG,CAAC;EACrD;EAEA,MAAMyW,cAAc,GAAGpO,cAAc;EACrCoO,cAAc,CAACnO,SAAS,CAAEC,aAAc,CAAC;EACzCkO,cAAc,CAAChO,EAAE,CAAE,OAAO,EAAEC,YAAY,CAAC;EAEzCrH,KAAK,CAACmU,QAAQ,GAAGiB,cAAc,CAACC,EAAE,CAAC9N,IAAI,CACtC;IACC+N,MAAM,EAAEC,qBAAqB,CAAC,CAAC;IAC/BC,MAAM,EAAEC,qBAAqB,CAAC;EAC/B,CACD,CAAC;EAEDzV,KAAK,CAACmU,QAAQ,CAAC/M,EAAE,CAAE,QAAQ,EAAE,OAAO,EAAE,MAAM;IAC3CsO,wBAAwB,CAAC,CAAC;IAC1BvE,iBAAiB,CAAC,CAAC;IAEnB3S,MAAM,CAAC0O,aAAa,CAAC,CAAC;EACvB,CAAE,CAAC;EACHlN,KAAK,CAACmU,QAAQ,CAAC/M,EAAE,CAAE,eAAe,EAAEQ,cAAe,CAAC;EACpD5H,KAAK,CAACmU,QAAQ,CAAC/M,EAAE,CAAE,aAAa,EAAEC,YAAa,CAAC;EAChDrH,KAAK,CAACmU,QAAQ,CAAC/M,EAAE,CAAE,OAAO,EAAEC,YAAa,CAAC;EAC1CrH,KAAK,CAACmU,QAAQ,CAAC/M,EAAE,CAAE,oBAAoB,EAAIuO,OAAO,IAAM;IACvD,IAAK,CAACA,OAAO,EAAG;MACfnX,MAAM,CAACiP,cAAc,CAAC,CAAC;MACvBgH,6BAA6B,CAAC,CAAC;MAC/B9D,mBAAmB,CAAC,CAAC;IACtB;EACD,CAAE,CAAC;;EAEH;EACA3Q,KAAK,CAACmU,QAAQ,CAACyB,KAAK,CAAE,MAAM;IAC3BpX,MAAM,CAACgC,mBAAmB,CAAC,CAAC;EAC7B,CAAE,CAAC;AACJ,CAAC;AAED,MAAMkV,wBAAwB,GAAGA,CAAA,KAAM;EACtC,MAAMpH,EAAE,GAAG7O,QAAQ,CAACW,aAAa,CAAE5B,MAAM,CAACgE,6BAA6B,CAAExC,KAAK,CAACpB,QAAQ,CAACD,EAAG,CAAE,CAAC;EAC9F2P,EAAE,CAAC5B,SAAS,CAACC,GAAG,CAAC,6BAA6B,CAAC;EAC/C2B,EAAE,CAAC5B,SAAS,CAACC,GAAG,CAAC,6CAA6C,CAAC;EAC/D2B,EAAE,CAAC9G,KAAK,CAACqO,MAAM,GAAG,oBAAoB;EACtCvH,EAAE,CAAC9G,KAAK,CAACsO,KAAK,GAAG,oBAAoB;EACrCxH,EAAE,CAAC9G,KAAK,CAACuO,QAAQ,GAAG,UAAU;AAC/B,CAAC;AAED,MAAMtB,6BAA6B,GAAGA,CAAA,KAAM;EAC3C,MAAMnG,EAAE,GAAG7O,QAAQ,CAACW,aAAa,CAAE5B,MAAM,CAACgE,6BAA6B,CAAExC,KAAK,CAACpB,QAAQ,CAACD,EAAG,CAAE,CAAC;EAC9F2P,EAAE,CAAC5B,SAAS,CAAChG,MAAM,CAAE,6BAA8B,CAAC;EACpD4H,EAAE,CAAC5B,SAAS,CAAChG,MAAM,CAAE,6CAA8C,CAAC;EACpE4H,EAAE,CAAC9G,KAAK,CAACqO,MAAM,GAAG,oBAAoB;EACtCvH,EAAE,CAAC9G,KAAK,CAACsO,KAAK,GAAG,oBAAoB;EACrCxH,EAAE,CAAC9G,KAAK,CAACuO,QAAQ,GAAG,UAAU;AAC/B,CAAC;AAED,MAAM5E,iBAAiB,GAAGA,CAAA,KAAM;EAC/B1R,QAAQ,CAACW,aAAa,CAAE5B,MAAM,CAACgI,eAAe,CAAC,CAAE,CAAC,CAACkG,SAAS,CAACC,GAAG,CAAE,6CAA8C,CAAC;EACjHlN,QAAQ,CAAC8M,gBAAgB,CAAG,GAAG/N,MAAM,CAACgI,eAAe,CAAC,CAAG,MAAM,CAAC,CAAC4K,OAAO,CAAIC,KAAK,IAAM;IACtFA,KAAK,CAAC7J,KAAK,CAAC8J,aAAa,GAAG,MAAM;EACnC,CAAC,CAAC;AACH,CAAC;AACD,MAAMX,mBAAmB,GAAGA,CAAA,KAAM;EACjClR,QAAQ,CAACW,aAAa,CAAE5B,MAAM,CAACgI,eAAe,CAAC,CAAE,CAAC,CAACkG,SAAS,CAAChG,MAAM,CAAE,6CAA8C,CAAC;EACpHjH,QAAQ,CAAC8M,gBAAgB,CAAG,GAAG/N,MAAM,CAACgI,eAAe,CAAC,CAAG,MAAM,CAAC,CAAC4K,OAAO,CAAIC,KAAK,IAAM;IACtFA,KAAK,CAAC7J,KAAK,CAAC8J,aAAa,GAAG,EAAE;EAC/B,CAAC,CAAC;AACH,CAAC;AAED,MAAMpB,aAAa,GAAKpQ,OAAO,IAAM;EACpCtB,MAAM,CAAC0R,aAAa,CAAE;IACrBpQ,OAAO;IACPkQ,EAAE,EAAEA,CAAA,KAAM;MACTyE,6BAA6B,CAAC,CAAC;MAC/B9D,mBAAmB,CAAC,CAAC;IACtB;EACD,CAAE,CAAC;AACJ,CAAC;AAED,MAAMqF,mBAAmB,GAAKC,SAAS,IAAM;EAC5C/F,aAAa,CAAElQ,KAAK,CAACpB,QAAQ,CAAC4V,qBAAqB,CAACyB,SAAS,CAAC,CAACC,QAAQ,CAACC,UAAW,CAAC;EAEpF3X,MAAM,CAACiP,cAAc,CAAC,CAAC;AACxB,CAAC;AAED,MAAMpG,YAAY,GAAKtE,KAAK,IAAM;EACjC,IAAK,CAAEA,KAAK,CAACgR,OAAO,EAAG;IACtB7D,aAAa,CAAE,4DAA6D,CAAC;IAE7E;EACD;EAEA,KAAM,IAAIkG,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGrT,KAAK,CAACgR,OAAO,CAAChM,MAAM,EAAEqO,CAAC,EAAE,EAAG;IAChD,MAAMC,MAAM,GAAGtT,KAAK,CAACgR,OAAO,CAACqC,CAAC,CAAC;IAC/B,QAASC,MAAM,CAACC,IAAI;MACnB,KAAK,mBAAmB;QACvBpG,aAAa,CAAE,iFAAkF,CAAC;QAElG;MACD;QACCA,aAAa,CAAEmG,MAAM,CAACvW,OAAQ,CAAC;IACjC;EACD;AACD,CAAC;AAED,MAAMyV,qBAAqB,GAAGA,CAAA,KAAM;EACnC,MAAMD,MAAM,GAAG;IACd,aAAa,EAAE;MACdiB,WAAW,EAAEvW,KAAK,CAACoU,YAAY,CAAC,mBAAmB,CAAC,CAACmC,WAAW;MAChEvC,MAAM,EAAE,GAAG,GAAGhU,KAAK,CAACpB,QAAQ,CAACD,EAAE,GAAG,GAAG,GAAGqB,KAAK,CAACoU,YAAY,CAAC,mBAAmB,CAAC,CAACa;IACjF,CAAC;IACD,iBAAiB,EAAE;MAClBsB,WAAW,EAAEvW,KAAK,CAACoU,YAAY,CAAC,mBAAmB,CAAC,CAACmC,WAAW;MAChEvC,MAAM,EAAE,GAAG,GAAGhU,KAAK,CAACpB,QAAQ,CAACD,EAAE,GAAG,GAAG,GAAGqB,KAAK,CAACoU,YAAY,CAAC,mBAAmB,CAAC,CAACa;IACjF,CAAC;IACD,UAAU,EAAE;MACXsB,WAAW,EAAEvW,KAAK,CAACoU,YAAY,CAAC,gBAAgB,CAAC,CAACmC,WAAW;MAC7DvC,MAAM,EAAE,GAAG,GAAGhU,KAAK,CAACpB,QAAQ,CAACD,EAAE,GAAG,GAAG,GAAGqB,KAAK,CAACoU,YAAY,CAAC,gBAAgB,CAAC,CAACa;IAC9E,CAAC;IACD,QAAQ,EAAE;MACTuB,IAAI,EAAEC,mBAAmB,CAAC,CAAC;MAC3BzC,MAAM,EAAE,GAAG,GAAGhU,KAAK,CAACpB,QAAQ,CAACD,EAAE,GAAG;IACnC;EACD,CAAC;EACD,IAAKqB,KAAK,CAACoU,YAAY,CAACsC,cAAc,CAAE,wBAAyB,CAAC,EAAG;IACpEpB,MAAM,CAAC,kBAAkB,CAAC,GAAG;MAC5BiB,WAAW,EAAEvW,KAAK,CAACoU,YAAY,CAAC,wBAAwB,CAAC,CAACmC,WAAW;MACrEvC,MAAM,EAAE,GAAG,GAAGhU,KAAK,CAACpB,QAAQ,CAACD,EAAE,GAAG,GAAG,GAAGqB,KAAK,CAACoU,YAAY,CAAC,wBAAwB,CAAC,CAACa;IACtF,CAAC;EACF;EACA,OAAOK,MAAM;AACd,CAAC;AAED,MAAMmB,mBAAmB,GAAGA,CAAA,KAAM;EACjC,MAAMpK,QAAQ,GAAG5M,QAAQ,CAACW,aAAa,CAAE5B,MAAM,CAAC2H,2BAA2B,CAAC,CAAE,CAAC;EAC/E,OAAOkG,QAAQ,CAACsK,SAAS;AAC1B,CAAC;AAED,MAAMlB,qBAAqB,GAAGA,CAAA,KAAM;EACnC,OAAO7Q,IAAI,CAACU,KAAK,CAAEtF,KAAK,CAACpB,QAAQ,CAACgY,YAAa,CAAC;AACjD,CAAC;AAED,MAAMhP,cAAc,GAAK3C,QAAQ,IAAM;EACtC,IAAKzG,MAAM,CAACkD,mBAAmB,CAAC,CAAC,EAAG;IACnC+S,6BAA6B,CAAC,CAAC;IAC/B9D,mBAAmB,CAAC,CAAC;IAErBhQ,MAAM,CAAC1B,EAAE,CAAC0C,IAAI,CAACC,QAAQ,CAAEjB,MAAM,CAACkB,EAAE,CAACC,YAAY,CAACC,oBAAoB,CAAC,CAACC,uBAAuB,CAAC,CAAC;IAE/FvC,QAAQ,CAACW,aAAa,CAAE,YAAa,CAAC,EAAE6B,cAAc,CAAE;MACvDC,QAAQ,EAAE,QAAQ;MAClBC,KAAK,EAAE,QAAQ;MACfC,MAAM,EAAE;IACT,CAAE,CAAC;IAEH;EACD;EAEA,IAAK,CAAEyU,qBAAqB,CAAE5R,QAAS,CAAC,EAAG;IAC1C;EACD;EAEAjF,KAAK,CAACwS,aAAa,GAAGvN,QAAQ;EAE9B+L,gBAAgB,CAAC,CAAC;AACnB,CAAC;AAED,MAAMA,gBAAgB,GAAGA,CAAA,KAAM;EAC9B,IAAKhR,KAAK,CAACpB,QAAQ,CAAC2S,eAAe,CAACC,kBAAkB,EAAG;IACxDhT,MAAM,CAACkE,YAAY,CAAC,CAAC;IAErB4N,+EAAY,CAAE;MACbtQ,KAAK;MACLxB,MAAM;MACN0R,aAAa;MACb9H;IACD,CAAE,CAAC;EACJ,CAAC,MAAM;IACNA,UAAU,CAAC,CAAC;EACb;AACD,CAAC;AAED,MAAMA,UAAU,GAAGA,CAAA,KAAM;EACxB,IAAI,OAAOpI,KAAK,CAACmU,QAAQ,CAAC2C,MAAM,CAAE,UAAU,CAAE,CAACC,MAAM,KAAK,UAAU,EAAG;IACtE/W,KAAK,CAACmU,QAAQ,CAAC2C,MAAM,CAAE,UAAU,CAAE,CAACC,MAAM,CAAC,CAAC,CAAC/R,IAAI,CAAIgS,MAAM,IAAM;MAEhE;AACH;AACA;AACA;AACA;MACG,IAAKhX,KAAK,CAACwS,aAAa,EAAG;QAC1BxS,KAAK,CAACwS,aAAa,CAACyE,OAAO,CAACC,gBAAgB,GAAGF,MAAM;MACtD;MAEAG,oBAAoB,CAAC,CAAC;IACvB,CAAC,CAAC;EACH,CAAC,MAAM;IACNA,oBAAoB,CAAC,CAAC;EACvB;AACD,CAAC;AAED,MAAMN,qBAAqB,GAAK5R,QAAQ,IAAM;EAC7C,IAAKA,QAAQ,CAACgS,OAAO,EAAG;IACvB,MAAMG,cAAc,GAAG,IAAIC,IAAI,CAAEpS,QAAQ,CAACgS,OAAO,CAACK,UAAU,EAAErS,QAAQ,CAACgS,OAAO,CAACM,WAAW,GAAG,CAAE,CAAC;IAChG,MAAMC,GAAG,GAAG,IAAIH,IAAI,CAAC,CAAC;IACtB,MAAMI,SAAS,GAAG,IAAIJ,IAAI,CAAEG,GAAG,CAACE,WAAW,CAAC,CAAC,EAAEF,GAAG,CAACG,QAAQ,CAAC,CAAE,CAAC;IAE/D,IAAK,CAAE1S,QAAQ,CAACgS,OAAO,CAACK,UAAU,IAAI,CAAErS,QAAQ,CAACgS,OAAO,CAACM,WAAW,IAAIH,cAAc,GAAGK,SAAS,EAAG;MACpGzB,mBAAmB,CAAE,mBAAoB,CAAC;MAC1C,OAAO,KAAK;IACb;EACD;EAEA,IAAK/Q,QAAQ,CAACgS,OAAO,IAAI,CAAEhS,QAAQ,CAACgS,OAAO,CAACC,gBAAgB,EAAG;IAC9DlB,mBAAmB,CAAE,gBAAiB,CAAC;IACvC,OAAO,KAAK;EACb;EAEA,OAAO,IAAI;AACZ,CAAC;AAED,MAAMmB,oBAAoB,GAAGA,CAAA,KAAM;EAClC,MAAM3R,iBAAiB,GAAG;IACzBoS,cAAc,EAAEhT,IAAI,CAACC,SAAS,CAAE7E,KAAK,CAACwS,aAAc;EACrD,CAAC;EAED,IAAKxS,KAAK,CAACwQ,aAAa,EAAG;IAC1BhL,iBAAiB,CAACgL,aAAa,GAAGxQ,KAAK,CAACwQ,aAAa;EACtD;EAEAhS,MAAM,CAACyH,oBAAoB,CAAET,iBAAkB,CAAC;EAEhDhH,MAAM,CAAC4J,UAAU,CAAC,CAAC;AACpB,CAAC;;;;;;;;;;;;;;;;;AC1VkF;AACI;AACF;AAE9E,MAAMyP,cAAc,GAAG;EAC7B3X,iBAAiB;EACjB0G,mBAAmB;EACnB0B,kBAAkBA,+FAAAA;AACnB,CAAC;;;;;;;;;;;;;;;;;;;;;;;ACR0D;AACR;AACQ;AAC2B;AAClB;AACI;AAExE,MAAM;EAAEtJ;AAAG,CAAC,GAAGC,EAAE,CAACC,IAAI;AAEf,MAAM4Y,mBAAmB,GAAG,CAAE;EACnCnZ,EAAE,EAAE,sBAAsB;EAC1BoZ,OAAO,EAAE7W,oDAAA,CAACmT,2DAAU;IAAC1V,EAAE,EAAG;EAAwB,CAAE,CAAC;EACrD8R,mBAAmB,EAAEvP,oDAAA,CAACuP,gFAAmB;IAAC9R,EAAE,EAAG;EAAwB,CAAE,CAAC;EAC1EqZ,cAAc,EAAIpZ,QAAQ,IAAM;IAC/B,IAAKA,QAAQ,CAAC2S,eAAe,CAACzD,IAAI,IAAIlP,QAAQ,CAAC2S,eAAe,CAACxO,KAAK,EAAG;MACtED,OAAO,CAACC,KAAK,CAAEnE,QAAQ,CAAC2S,eAAe,CAACzR,OAAQ,CAAC;MAEjD,OAAO,KAAK;IACb;IAEA,OAAO,IAAI;EACZ;AACD,CAAC,EAAE;EACFnB,EAAE,EAAE,2BAA2B;EAC/BoZ,OAAO,EAAE7W,oDAAA,CAAC2W,mEAAc,CAACjR,mBAAmB,MAAE,CAAC;EAC/C6J,mBAAmB,EAAE,IAAI;EACzBuH,cAAc,EAAIpZ,QAAQ,IAAM;IAC/B,IAAKA,QAAQ,CAACwC,sBAAsB,CAAC2B,KAAK,EAAG;MAC5CD,OAAO,CAACC,KAAK,CAAEnE,QAAQ,CAACwC,sBAAsB,CAACtB,OAAQ,CAAC;MAExD,OAAO,KAAK;IACb;IAEA,OAAO,IAAI;EACZ;AACD,CAAC,EAAE;EACFnB,EAAE,EAAE,0BAA0B;EAC9BoZ,OAAO,EAAE7W,oDAAA,CAAC2W,mEAAc,CAACvP,kBAAkB,MAAE,CAAC;EAC9CmI,mBAAmB,EAAE,IAAI;EACzBuH,cAAc,EAAEA,CAAA,KAAM;AACvB,CAAC,EAAE;EACFrZ,EAAE,EAAE,yBAAyB;EAC7BoZ,OAAO,EAAE7W,oDAAA,CAAC2W,mEAAc,CAAC3X,iBAAiB,MAAE,CAAC;EAC7CuQ,mBAAmB,EAAE,IAAI;EACzBuH,cAAc,EAAEA,CAAA,KAAM;IACrB,IAAK,QAAQ,KAAK3F,QAAQ,CAAC4F,QAAQ,EAAG;MACrCnV,OAAO,CAACoV,IAAI,CAAElZ,EAAE,CAAE,uDAAuD,EAAE,iDAAkD,CAAE,CAAC;MAChI,OAAO,KAAK;IACb;IAEA,IAAK,IAAI,MAAO2B,MAAM,CAACgC,eAAe,IAAIA,eAAe,CAACwV,eAAe,CAAC,CAAC,CAAE,EAAG;MAC/ErV,OAAO,CAACoV,IAAI,CAAElZ,EAAE,CAAE,mDAAmD,EAAE,iDAAkD,CAAE,CAAC;MAC5H,OAAO,KAAK;IACb;IAEA,OAAO,IAAI;EACZ;AACD,CAAC,EAAE;EACFL,EAAE,EAAE,uBAAuB;EAC3BoZ,OAAO,EAAE7W,oDAAA,CAACgT,mEAAc,CAAC/U,eAAe;IAACR,EAAE,EAAG;EAAyB,CAAE,CAAC;EAC1E8R,mBAAmB,EAAE,IAAI;EACzBuH,cAAc,EAAEA,CAAA,KAAM;AACvB,CAAC,EAAE;EACFrZ,EAAE,EAAE,uBAAuB;EAC3BoZ,OAAO,EAAE7W,oDAAA,CAACgT,mEAAc,CAACnU,eAAe;IAACpB,EAAE,EAAG;EAAyB,CAAE,CAAC;EAC1E8R,mBAAmB,EAAE,IAAI;EACzBuH,cAAc,EAAEA,CAAA,KAAM;AACvB,CAAC,EAAE;EACFrZ,EAAE,EAAE,4BAA4B;EAChCoZ,OAAO,EAAE7W,oDAAA,CAACmP,8FAAoB;IAAC1R,EAAE,EAAG;EAA8B,CAAE,CAAC;EACrE8R,mBAAmB,EAAE,IAAI;EACzBuH,cAAc,EAAEA,CAAA,KAAM;AACvB,CAAC,EAAE;EACFrZ,EAAE,EAAE,uBAAuB;EAC3BoZ,OAAO,EAAE7W,oDAAA,CAACxC,4EAAe;IAACC,EAAE,EAAG;EAAyB,CAAE,CAAC;EAC3D8R,mBAAmB,EAAE,IAAI;EACzBuH,cAAc,EAAEA,CAAA,KAAM;AACvB,CAAC,CACD;;;;;;;;;;;;;;;;;;;;;;;AC9EoE;AACX;AACP;AAE5C,MAAMM,QAAQ,GAAKlZ,KAAK,IAAM;EACpC,MAAM;IAAET,EAAE;IAAEoZ,OAAO;IAAEtH,mBAAmB;IAAEuH;EAAe,CAAC,GAAG5Y,KAAK;EAClE,MAAMR,QAAQ,GAAGL,iEAAU,CAAEI,EAAE,GAAG,OAAO,EAAE,CAAC,CAAE,CAAC;EAC/C,IAAK6K,MAAM,CAAC+K,OAAO,CAAC3V,QAAQ,CAAC,CAACmJ,MAAM,KAAK,CAAC,EAAG;IAC5C;EACD;EAEA,MAAMhE,KAAK,GAAGsU,wEAAc,CAAEzZ,QAAQ,CAAC0C,KAAM,CAAC;EAC9C,MAAMiX,KAAK,GAAKnZ,KAAK,IAAM;IAC1B,MAAM;MAAEoZ;IAAmB,CAAC,GAAGpZ,KAAK,CAACqZ,UAAU;IAC/C,OAAOvX,oDAAA,CAACsX,kBAAkB;MAAChC,IAAI,EAAGzS;IAAO,CAAE,CAAC;EAC7C,CAAC;EAED,MAAM2U,aAAa,GAAG;IACrBzN,IAAI,EAAEtM,EAAE;IACRoF,KAAK,EAAE7C,oDAAA,CAACqX,KAAK,MAAE,CAAC;IAChBI,OAAO,EAAEZ,OAAO;IAChBa,IAAI,EAAEb,OAAO;IACbc,mBAAmB,EAAEpI,mBAAmB;IACxCuH,cAAc,EAAEA,CAAA,KAAMA,cAAc,CAAEpZ,QAAS,CAAC;IAChDka,SAAS,EAAE/U,KAAK;IAChBgV,QAAQ,EAAE;MACTC,QAAQ,EAAEpa,QAAQ,CAACma,QAAQ;MAC3BE,cAAc,EAAEra,QAAQ,CAACsa;IAC1B;EACD,CAAC;EAEDd,mFAAqB,CAAEM,aAAc,CAAC;AACvC,CAAC;;;;;;;;;;AChCD;;;;;;;;;;ACAA;;;;;;;;;;ACAA;;;;;;;;;;ACAA;;;;;;UCAA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;WCtBA;WACA;WACA;WACA;WACA;WACA,iCAAiC,WAAW;WAC5C;WACA;;;;;WCPA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA;;;;;WCAA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D;;;;;;;;;;;;;;;ACN6C;AACC;AACmB;AAEjE,MAAMhJ,cAAc,GAAGvD,+EAAiB,CAAC,CAAC;AAE1C2L,uDAAmB,CAAC1G,OAAO,CAAI+H,kBAAkB,IAAM;EACtD,IAAK,CAAEzJ,cAAc,CAACgH,cAAc,CAAEyC,kBAAkB,CAACxa,EAAG,CAAC,EAAG;IAC/D2Z,yDAAQ,CAAEa,kBAAmB,CAAC;EAC/B;AACD,CAAE,CAAC,C","sources":["webpack://globalpayments-woocommerce/./resources/js/frontend/components/apm/paypalComponent.js","webpack://globalpayments-woocommerce/./resources/js/frontend/components/buyNowPayLater/affirmComponent.js","webpack://globalpayments-woocommerce/./resources/js/frontend/components/buyNowPayLater/klarnaComponent.js","webpack://globalpayments-woocommerce/./resources/js/frontend/components/digitalWallets/applePayComponent.js","webpack://globalpayments-woocommerce/./resources/js/frontend/components/digitalWallets/clickToPayComponent.js","webpack://globalpayments-woocommerce/./resources/js/frontend/components/digitalWallets/googlePayComponent.js","webpack://globalpayments-woocommerce/./resources/js/frontend/components/helper.js","webpack://globalpayments-woocommerce/./resources/js/frontend/components/openBanking/openBankingComponent.js","webpack://globalpayments-woocommerce/./resources/js/frontend/components/savedTokenComponent.js","webpack://globalpayments-woocommerce/./resources/js/frontend/components/threeDSecureComponent.js","webpack://globalpayments-woocommerce/./resources/js/frontend/content/buyNowPayLater.js","webpack://globalpayments-woocommerce/./resources/js/frontend/content/creditCard.js","webpack://globalpayments-woocommerce/./resources/js/frontend/content/digitalWallets.js","webpack://globalpayments-woocommerce/./resources/js/frontend/gateways/gpapi.js","webpack://globalpayments-woocommerce/./resources/js/frontend/utils/register.js","webpack://globalpayments-woocommerce/external window \"React\"","webpack://globalpayments-woocommerce/external window [\"wc\",\"wcBlocksRegistry\"]","webpack://globalpayments-woocommerce/external window [\"wc\",\"wcSettings\"]","webpack://globalpayments-woocommerce/external window [\"wp\",\"htmlEntities\"]","webpack://globalpayments-woocommerce/webpack/bootstrap","webpack://globalpayments-woocommerce/webpack/runtime/compat get default export","webpack://globalpayments-woocommerce/webpack/runtime/define property getters","webpack://globalpayments-woocommerce/webpack/runtime/hasOwnProperty shorthand","webpack://globalpayments-woocommerce/webpack/runtime/make namespace object","webpack://globalpayments-woocommerce/./resources/js/frontend/gateways/index.js"],"sourcesContent":["import { getSetting } from '@woocommerce/settings';\r\nimport { helper as gp_helper } from '../helper';\r\n\r\nexport const PaypalComponent = ( { id } ) => {\r\n\tconst settings = getSetting( id + '_data', {} );\r\n\tconst helper = gp_helper( settings.helper_params );\r\n\thelper.showPlaceOrderButton();\r\n};\r\n","import { getSetting } from '@woocommerce/settings';\r\nimport { helper as gp_helper } from '../helper';\r\nimport { useEffect } from 'react';\r\n\r\nconst { __ } = wp.i18n;\r\n\r\nexport const AffirmComponent = ( props ) => {\r\n\tconst { id, eventRegistration } = props;\r\n\tconst { onPaymentSetup } = eventRegistration;\r\n\tconst settings = getSetting( id + '_data', {} );\r\n\tconst helper = gp_helper( settings.helper_params );\r\n\thelper.showPlaceOrderButton();\r\n\r\n\tuseEffect( () => {\r\n\t\tconst unsubscribe = onPaymentSetup( () => {\r\n\t\t\tconst shippingPhone = document.getElementById( 'shipping-phone' );\r\n\t\t\tconst billingPhone = document.getElementById( 'billing-phone' );\r\n\t\t\tif ( ! shippingPhone?.value && ! billingPhone?.value ) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\ttype: 'error',\r\n\t\t\t\t\tmessage: __( '<strong>Phone</strong> is a required field for this payment method.', 'globalpayments-gateway-provider-for-woocommerce' )\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t\treturn true;\r\n\t\t} );\r\n\r\n\t\treturn () => {\r\n\t\t\tunsubscribe();\r\n\t\t};\r\n\t}, [ onPaymentSetup ] );\r\n};\r\n","import { getSetting } from '@woocommerce/settings';\r\nimport { helper as gp_helper } from '../helper';\r\nimport { useEffect } from 'react';\r\n\r\nconst { __ } = wp.i18n;\r\n\r\nexport const KlarnaComponent = ( props ) => {\r\n\tconst { id, eventRegistration } = props;\r\n\tconst { onPaymentSetup } = eventRegistration;\r\n\tconst settings = getSetting( id + '_data', {} );\r\n\tconst helper = gp_helper( settings.helper_params );\r\n\thelper.showPlaceOrderButton();\r\n\r\n\tuseEffect( () => {\r\n\t\tconst unsubscribe = onPaymentSetup( () => {\r\n\t\t\tconst shippingPhone = document.getElementById( 'shipping-phone' );\r\n\t\t\tconst billingPhone = document.getElementById( 'billing-phone' );\r\n\t\t\tif ( ! shippingPhone?.value && ! billingPhone?.value ) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\ttype: 'error',\r\n\t\t\t\t\tmessage: __( '<strong>Phone</strong> is a required field for this payment method.', 'globalpayments-gateway-provider-for-woocommerce' )\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t\treturn true;\r\n\t\t} );\r\n\r\n\t\treturn () => {\r\n\t\t\tunsubscribe();\r\n\t\t};\r\n\t}, [ onPaymentSetup ] );\r\n};\r\n","import { getSetting } from '@woocommerce/settings';\r\nimport { helper as gp_helper } from '../../components/helper';\r\nimport { useEffect } from 'react';\r\n\r\nconst { __ } = wp.i18n;\r\n\r\nconst state = {\r\n\torder: null,\r\n\tsettings: null,\r\n};\r\n\r\nlet helper = {};\r\n\r\nexport const ApplePayComponent = () => {\r\n\tstate.settings = getSetting( 'globalpayments_applepay_data', {} );\r\n\r\n\thelper = gp_helper( state.settings.helper_params );\r\n\r\n\tuseEffect( () => {\r\n\t\tattachEventHandlers();\r\n\r\n\t\treturn () => {\r\n\t\t\tif ( ! document.querySelector( helper.getPaymentMethodRadioSelector( state.settings.id ) )?.checked ) {\r\n\t\t\t\tremoveApplePayButton();\r\n\t\t\t\thelper.toggleSubmitButtons();\r\n\t\t\t}\r\n\t\t};\r\n\t} );\r\n};\r\n\r\nconst attachEventHandlers = () => {\r\n\tif ( helper.isFirstPaymentMethod( state.settings.id ) || helper.isOnlyGatewayMethodDisplayed( state.settings.id ) ) {\r\n\t\twindow.onload = () => {\r\n\t\t\tinitialize();\r\n\t\t};\r\n\t}\r\n\r\n\tdocument.querySelector( '#radio-control-wc-payment-method-options-globalpayments_applepay' ).addEventListener( 'change', initialize );\r\n};\r\n\r\nconst initialize = () => {\r\n\thelper.toggleSubmitButtons();\r\n\r\n\taddApplePayButton();\r\n};\r\n\r\n/**\r\n * Add the apple pay button to the DOM\r\n */\r\nconst addApplePayButton = () => {\r\n\thelper.createSubmitButtonTarget( state.settings.id );\r\n\r\n\tconst paymentButton = document.createElement( 'div' );\r\n\tpaymentButton.className = 'apple-pay-button apple-pay-button-' + state.settings.payment_method_options.button_color;\r\n\tpaymentButton.title = __( 'Pay with Apple Pay', 'globalpayments-gateway-provider-for-woocommerce');\r\n\tpaymentButton.alt = __( 'Pay with Apple Pay', 'globalpayments-gateway-provider-for-woocommerce');\r\n\tpaymentButton.id = state.settings.id;\r\n\r\n\tpaymentButton.addEventListener( 'click', ( e ) => {\r\n\t\te.preventDefault();\r\n\r\n\t\tif ( helper.hasValidationErrors() ) {\r\n\t\t\twindow.wp.data.dispatch( window.wc.wcBlocksData.VALIDATION_STORE_KEY).showAllValidationErrors();\r\n\r\n\t\t\tdocument.querySelector( '.has-error' )?.scrollIntoView( {\r\n\t\t\t\tbehavior: 'smooth',\r\n\t\t\t\tblock: 'center',\r\n\t\t\t\tinline: 'start',\r\n\t\t\t} );\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst applePaySession = createApplePaySession();\r\n\t\tapplePaySession.begin();\r\n\t} );\r\n\r\n\tdocument.querySelector( helper.getSubmitButtonTargetSelector( state.settings.id ) ).append( paymentButton );\r\n};\r\n\r\nconst createApplePaySession = () => {\r\n\thelper.getOrderInfo();\r\n\r\n\tstate.order = helper.order;\r\n\tlet applePaySession = null;\r\n\r\n\ttry {\r\n\t\tapplePaySession = new ApplePaySession( 1, getPaymentRequest() );\r\n\t} catch ( err ) {\r\n\t\tconsole.error( __( 'Unable to create ApplePaySession', 'globalpayments-gateway-provider-for-woocommerce' ), err )\r\n\t\talert( __( 'We\\'re unable to take your payment through Apple Pay. Please try again or use an alternative payment method.', 'globalpayments-gateway-provider-for-woocommerce' ) );\r\n\t\treturn false;\r\n\t}\r\n\r\n\t// Handle validate merchant event\r\n\tapplePaySession.onvalidatemerchant = ( event ) => {\r\n\t\tonApplePayValidateMerchant( event, applePaySession );\r\n\t}\r\n\r\n\t// Attach payment auth event\r\n\tapplePaySession.onpaymentauthorized = ( event ) => {\r\n\t\tonApplePayPaymentAuthorize( event, applePaySession )\r\n\t}\r\n\r\n\tapplePaySession.oncancel = ( event ) => {\r\n\t\talert( __( 'We\\'re unable to take your payment through Apple Pay. Please try again or use an alternative payment method.', 'globalpayments-gateway-provider-for-woocommerce' ) );\r\n\t};\r\n\r\n\treturn applePaySession;\r\n};\r\n\r\nconst getPaymentRequest = () => {\r\n\treturn {\r\n\t\tcountryCode: getCountryId(),\r\n\t\tcurrencyCode: state.order.currency,\r\n\t\tmerchantCapabilities: [\r\n\t\t\t'supports3DS'\r\n\t\t],\r\n\t\tsupportedNetworks: getAllowedCardNetworks(),\r\n\t\ttotal: {\r\n\t\t\tlabel: getDisplayName(),\r\n\t\t\tamount: state.order.amount.toString()\r\n\t\t},\r\n\t\trequiredBillingContactFields: [ 'postalAddress', 'name' ],\r\n\t};\r\n};\r\n\r\nconst getCountryId = () => {\r\n\treturn state.settings.payment_method_options.country_code;\r\n};\r\n\r\nconst getAllowedCardNetworks = () => {\r\n\treturn state.settings.payment_method_options.cc_types;\r\n};\r\n\r\nconst getDisplayName = () => {\r\n\treturn state.settings.payment_method_options.apple_merchant_display_name;\r\n};\r\n\r\nconst onApplePayValidateMerchant = ( event, session ) => {\r\n\tfetch( state.settings.payment_method_options.validate_merchant_url, {\r\n\t\tcache: 'no-store',\r\n\t\tbody: JSON.stringify( { 'validationUrl': event.validationURL } ),\r\n\t\tmethod: 'POST'\r\n\t} ).then( ( response ) => response.json() )\r\n\t.then( ( response ) => {\r\n\t\tif ( response.error ) {\r\n\t\t\tconsole.log( 'response', response );\r\n\t\t\tsession.abort();\r\n\t\t\talert( __( 'We\\'re unable to take your payment through Apple Pay. Please try again or use an alternative payment method.', 'globalpayments-gateway-provider-for-woocommerce' ) );\r\n\t\t} else {\r\n\t\t\tsession.completeMerchantValidation( JSON.parse( response.message ) );\r\n\t\t}\r\n\t} ).catch( ( response ) => {\r\n\t\tconsole.log( 'response', response );\r\n\t\tsession.abort();\r\n\t\talert( __( 'We\\'re unable to take your payment through Apple Pay. Please try again or use an alternative payment method.', 'globalpayments-gateway-provider-for-woocommerce' ) );\r\n\t} );\r\n};\r\n\r\nconst onApplePayPaymentAuthorize = ( event, session ) => {\r\n\ttry {\r\n\t\tconst paymentMethodData = {\r\n\t\t\tdw_token: JSON.stringify( event.payment.token.paymentData )\r\n\t\t};\r\n\r\n\t\tif ( event.payment.billingContact ) {\r\n\t\t\tpaymentMethodData.cardHolderName = event.payment.billingContact.givenName + ' ' +  event.payment.billingContact.familyName;\r\n\t\t}\r\n\r\n\t\thelper.setPaymentMethodData( paymentMethodData );\r\n\r\n\t\tconst originalSubmit = document.querySelector( helper.getPlaceOrderButtonSelector() );\r\n\t\tif ( originalSubmit ) {\r\n\t\t\toriginalSubmit.click();\r\n\t\t\tsession.completePayment( ApplePaySession.STATUS_SUCCESS );\r\n\t\t\treturn;\r\n\t\t}\r\n\t} catch ( e ) {\r\n\t\tsession.completePayment( ApplePaySession.STATUS_FAILURE );\r\n\t}\r\n\tsession.completePayment( ApplePaySession.STATUS_SUCCESS );\r\n\tdocument.querySelector( helper.getFormSelector() ).submit();\r\n};\r\n\r\nconst removeApplePayButton = () => {\r\n\tdocument.querySelector( helper.getSubmitButtonTargetSelector( state.settings.id ) )?.remove();\r\n};\r\n","import { getSetting } from '@woocommerce/settings';\r\nimport { helper as gp_helper } from '../../components/helper';\r\nimport { useEffect } from 'react';\r\n\r\nconst { __ } = wp.i18n;\r\n\r\nconst state = {\r\n\torder: null,\r\n\tctpForm: null,\r\n\tsettings: null,\r\n};\r\n\r\nlet helper = {};\r\n\r\nexport const ClickToPayComponent = () => {\r\n\tstate.settings = getSetting( 'globalpayments_clicktopay_data', {} );\r\n\thelper = gp_helper( state.settings.helper_params );\r\n\r\n\tuseEffect( () => {\r\n\t\tattachEventHandlers();\r\n\r\n\t\treturn () => {\r\n\t\t\tif ( ! document.querySelector( helper.getPaymentMethodRadioSelector( state.settings.id ) )?.checked ) {\r\n\t\t\t\thelper.toggleSubmitButtons();\r\n\t\t\t}\r\n\t\t};\r\n\t} );\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<div id={ state.settings.id }></div>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nconst attachEventHandlers = () => {\r\n\tif ( helper.isFirstPaymentMethod( state.settings.id ) || helper.isOnlyGatewayMethodDisplayed( state.settings.id ) ) {\r\n\t\twindow.onload = () => {\r\n\t\t\trenderClickToPay();\r\n\t\t};\r\n\t}\r\n\r\n\tdocument.querySelector( '#radio-control-wc-payment-method-options-globalpayments_clicktopay' ).addEventListener( 'change', renderClickToPay );\r\n};\r\n\r\n/**\r\n * Renders the payment fields using GlobalPayments.js. Each field is securely hosted on\r\n * Global Payments' production servers.\r\n *\r\n * @returns\r\n */\r\nconst renderClickToPay = () => {\r\n\thelper.toggleSubmitButtons();\r\n\r\n\tclearContent();\r\n\r\n\tif ( ! GlobalPayments.configure ) {\r\n\t\tconsole.log( __( 'Warning! Payment fields cannot be loaded', 'globalpayments-gateway-provider-for-woocommerce' ) );\r\n\t\treturn;\r\n\t}\r\n\r\n\tconst gatewayConfig = state.settings.payment_method_options;\r\n\r\n\thelper.getOrderInfo();\r\n\r\n\tstate.order = helper.order;\r\n\tgatewayConfig.apms.currencyCode = state.order.currency;\r\n\r\n\tGlobalPayments.configure( gatewayConfig );\r\n\tGlobalPayments.on( 'error', handleErrors );\r\n\r\n\tstate.ctpForm = GlobalPayments.apm.form( '#' + state.settings.id, {\r\n\t\tamount: state.order.amount.toString(),\r\n\t\tstyle: \"gp-default\",\r\n\t\tapms: [ GlobalPayments.enums.Apm.ClickToPay ]\r\n\t} );\r\n\r\n\tstate.ctpForm.on( 'token-success', handleResponse );\r\n\r\n\tstate.ctpForm.on( 'token-error', handleErrors );\r\n\tstate.ctpForm.on( 'error', handleErrors );\r\n};\r\n\r\n/**\r\n * If the CTP element already has some previous content, clear it.\r\n */\r\nconst clearContent = () => {\r\n\tconst ctpElement = document.querySelector( '#' + state.settings.id );\r\n\tif ( ctpElement?.children.length > 0 ) {\r\n\t\twhile ( ctpElement.firstChild ) {\r\n\t\t\tctpElement.removeChild( ctpElement.lastChild );\r\n\t\t}\r\n\r\n\t\tdocument.querySelector( '#' + state.settings.id + '-dw_token' )?.remove();\r\n\t}\r\n};\r\n\r\n/**\r\n * Handles errors from the payment field\r\n *\r\n * @param {object} error Details about the error\r\n *\r\n * @returns\r\n */\r\nconst handleErrors = ( error ) => {\r\n\tconsole.error( error );\r\n};\r\n\r\n/**\r\n * Handles the tokenization response\r\n *\r\n * On valid payment fields, the tokenization response is added to the current\r\n * state, and the order is placed.\r\n *\r\n * @param {object} response tokenization response\r\n *\r\n * @returns\r\n */\r\nconst handleResponse = ( response ) => {\r\n\thelper.setPaymentMethodData( {\r\n\t\tdw_token: response.paymentReference\r\n\t} );\r\n\r\n\treturn helper.placeOrder();\r\n};\r\n","import { getSetting } from '@woocommerce/settings';\r\nimport { helper as gp_helper } from '../../components/helper';\r\nimport { useEffect } from 'react';\r\n\r\nconst state = {\r\n\torder: null,\r\n\tsettings: null,\r\n\tpaymentsClient: null,\r\n};\r\n\r\nlet helper = {};\r\n\r\nexport const GooglePayComponent = ( props ) => {\r\n\tconst { eventRegistration } = props;\r\n\r\n\tstate.settings = getSetting( 'globalpayments_googlepay_data', {} );\r\n\r\n\thelper = gp_helper( state.settings.helper_params );\r\n\r\n\tconst { onCheckoutFail } = eventRegistration;\r\n\r\n\tuseEffect( () => {\r\n\t\tattachEventHandlers();\r\n\r\n\t\tconst unsubscribeOnCheckoutFail = onCheckoutFail( () => {\r\n\t\t\tdocument.querySelector( '.is-error' )?.scrollIntoView( {\r\n\t\t\t\tbehavior: 'smooth',\r\n\t\t\t\tblock: 'center',\r\n\t\t\t\tinline: 'start',\r\n\t\t\t} );\r\n\t\t} );\r\n\r\n\t\treturn () => {\r\n\t\t\tif ( ! document.querySelector( helper.getPaymentMethodRadioSelector( state.settings.id ) )?.checked ) {\r\n\t\t\t\tremoveGooglePayButton();\r\n\t\t\t\thelper.toggleSubmitButtons();\r\n\t\t\t}\r\n\r\n\t\t\tunsubscribeOnCheckoutFail();\r\n\t\t};\r\n\t}, [ onCheckoutFail ] );\r\n};\r\n\r\nconst attachEventHandlers = () => {\r\n\tif ( helper.isFirstPaymentMethod( state.settings.id ) || helper.isOnlyGatewayMethodDisplayed( state.settings.id ) ) {\r\n\t\twindow.onload = () => {\r\n\t\t\tinitialize();\r\n\t\t};\r\n\t}\r\n\r\n\tdocument.querySelector( '#radio-control-wc-payment-method-options-globalpayments_googlepay' ).addEventListener( 'change', initialize );\r\n};\r\n\r\nconst initialize = () => {\r\n\tsetGooglePaymentsClient();\r\n\r\n\tstate.paymentsClient.isReadyToPay(\r\n\t\tgetGoogleIsReadyToPayRequest()\r\n\t).then( ( response ) => {\r\n\t\tif ( response.result ) {\r\n\t\t\taddGooglePayButton( state.settings.id );\r\n\t\t} else {\r\n\t\t\thelper.hidePaymentMethod( state.settings.id );\r\n\t\t\thelper.hidePlaceOrderButton();\r\n\t\t}\r\n\t} ).catch( console.error );\r\n};\r\n\r\nconst setGooglePaymentsClient = () => {\r\n\tif ( null === state.paymentsClient ) {\r\n\t\tstate.paymentsClient = new google.payments.api.PaymentsClient( {\r\n\t\t\tenvironment: getEnvironment()\r\n\t\t} );\r\n\t}\r\n};\r\n\r\nconst getEnvironment = () => {\r\n\treturn state.settings.payment_method_options.env;\r\n};\r\n\r\nconst getGoogleIsReadyToPayRequest = () => {\r\n\treturn Object.assign(\r\n\t\t{},\r\n\t\tgetBaseRequest(),\r\n\t\t{\r\n\t\t\tallowedPaymentMethods: [ getBaseCardPaymentMethod() ]\r\n\t\t}\r\n\t);\r\n};\r\n\r\nconst getBaseRequest = () => {\r\n\treturn {\r\n\t\tapiVersion: 2,\r\n\t\tapiVersionMinor: 0\r\n\t};\r\n};\r\n\r\nconst getBaseCardPaymentMethod = () => {\r\n\treturn {\r\n\t\ttype: 'CARD',\r\n\t\tparameters: {\r\n\t\t\tallowedAuthMethods: getAllowedCardAuthMethods(),\r\n\t\t\tallowedCardNetworks: getAllowedCardNetworks(),\r\n\t\t\tbillingAddressRequired: true\r\n\t\t}\r\n\t};\r\n};\r\n\r\nconst getAllowedCardAuthMethods = () => {\r\n\treturn state.settings.payment_method_options.aca_methods;\r\n\r\n};\r\nconst getAllowedCardNetworks = () => {\r\n\treturn state.settings.payment_method_options.cc_types;\r\n};\r\n\r\nconst addGooglePayButton = () => {\r\n\thelper.createSubmitButtonTarget( state.settings.id );\r\n\r\n\tconst button = state.paymentsClient.createButton( {\r\n\t\tbuttonColor: getBtnColor(),\r\n\t\tonClick: () => {\r\n\t\t\tonGooglePaymentButtonClicked();\r\n\t\t}\r\n\t} );\r\n\r\n\tdocument.querySelector( helper.getSubmitButtonTargetSelector( state.settings.id ) ).append( button );\r\n};\r\n\r\nconst getBtnColor = () => {\r\n\treturn state.settings.payment_method_options.button_color;\r\n};\r\n\r\nconst onGooglePaymentButtonClicked = () => {\r\n\tif ( helper.hasValidationErrors() ) {\r\n\t\twindow.wp.data.dispatch( window.wc.wcBlocksData.VALIDATION_STORE_KEY).showAllValidationErrors();\r\n\r\n\t\tdocument.querySelector( '.has-error' )?.scrollIntoView( {\r\n\t\t\tbehavior: 'smooth',\r\n\t\t\tblock: 'center',\r\n\t\t\tinline: 'start',\r\n\t\t} );\r\n\r\n\t\treturn;\r\n\t}\r\n\r\n\thelper.getOrderInfo();\r\n\r\n\tstate.order = helper.order;\r\n\tconst paymentDataRequest = getGooglePaymentDataRequest();\r\n\r\n\tstate.paymentsClient.loadPaymentData( paymentDataRequest ).then( ( paymentData ) => {\r\n\t\thelper.setPaymentMethodData( {\r\n\t\t\tdw_token: JSON.stringify( JSON.parse( paymentData.paymentMethodData.tokenizationData.token ) ),\r\n\t\t\tcardHolderName: paymentData.paymentMethodData.info.billingAddress.name\r\n\t\t} );\r\n\r\n\t\treturn helper.placeOrder();\r\n\t} ).catch( console.error );\r\n};\r\n\r\nconst getGooglePaymentDataRequest = () => {\r\n\tconst paymentDataRequest = Object.assign({}, getBaseRequest() );\r\n\tpaymentDataRequest.allowedPaymentMethods = [ getCardPaymentMethod() ];\r\n\tpaymentDataRequest.transactionInfo = getGoogleTransactionInfo();\r\n\tpaymentDataRequest.merchantInfo = {\r\n\t\tmerchantId: getGoogleMerchantId(),\r\n\t\tmerchantName: getGoogleMerchantName()\r\n\t};\r\n\r\n\treturn paymentDataRequest;\r\n};\r\n\r\nconst getCardPaymentMethod = () => {\r\n\treturn Object.assign(\r\n\t\t{},\r\n\t\tgetBaseCardPaymentMethod(),\r\n\t\t{\r\n\t\t\ttokenizationSpecification: getTokenizationSpecification()\r\n\t\t}\r\n\t);\r\n};\r\n\r\nconst getTokenizationSpecification = () => {\r\n\treturn {\r\n\t\ttype: 'PAYMENT_GATEWAY',\r\n\t\tparameters: {\r\n\t\t\tgateway: 'globalpayments',\r\n\t\t\tgatewayMerchantId: state.settings.payment_method_options.global_payments_merchant_id\r\n\t\t}\r\n\t};\r\n};\r\n\r\nconst getGoogleTransactionInfo = () => {\r\n\treturn {\r\n\t\ttotalPriceStatus: 'FINAL',\r\n\t\ttotalPrice: state.order.amount.toString(),\r\n\t\tcurrencyCode: state.order.currency\r\n\t};\r\n};\r\n\r\nconst getGoogleMerchantId = () => {\r\n\treturn state.settings.payment_method_options.google_merchant_id;\r\n};\r\n\r\nconst getGoogleMerchantName = () => {\r\n\treturn state.settings.payment_method_options.google_merchant_name;\r\n};\r\n\r\nconst removeGooglePayButton = () => {\r\n\tdocument.querySelector( helper.getSubmitButtonTargetSelector( state.settings.id ) )?.remove();\r\n};\r\n","import { getPaymentMethods } from '@woocommerce/blocks-registry';\r\n\r\nconst getElement = ( selector ) => {\r\n\treturn document.querySelector( selector );\r\n};\r\n\r\nconst getAllElements = ( selector ) => {\r\n\treturn document.querySelectorAll( selector );\r\n};\r\n\r\nconst addClass = ( element, className ) => {\r\n\telement?.classList.add( className );\r\n\r\n\treturn element;\r\n};\r\n\r\nconst removeClass = ( element, className ) => {\r\n\telement?.classList.remove( className );\r\n\r\n\treturn element;\r\n};\r\n\r\nconst hideElement = ( element ) => {\r\n\tif (element?.style) {\r\n\t\telement.style.display = 'none';\r\n\t}\r\n\r\n\treturn element;\r\n};\r\n\r\nconst showElement = ( element ) => {\r\n\tif (element?.style) {\r\n\t\telement.style.display = '';\r\n\t}\r\n\r\n\treturn element;\r\n};\r\n\r\nlet params = {};\r\n\r\nexport const helper = ( helper_params ) => {\r\n\tparams = helper_params;\r\n\r\n\treturn {\r\n\t\t...helper_functions,\r\n\t\torder: params.order\r\n\t};\r\n};\r\n\r\nconst helper_functions = {\r\n\t/**\r\n\t * Get order info\r\n\t */\r\n\tgetOrderInfo: () => {\r\n\t\thelper_functions.blockOnSubmit();\r\n\r\n\t\tfetch( params.orderInfoUrl )\r\n\t\t\t.then( ( res ) => res.json() )\r\n\t\t\t.then( ( result ) => {\r\n\t\t\t\tparams.order = result.message;\r\n\t\t\t} )\r\n\t\t\t.catch( ( jqXHR, textStatus, errorThrown ) => {\r\n\t\t\t\tconsole.log( errorThrown );\r\n\t\t\t} )\r\n\t\t\t.finally( () => {\r\n\t\t\t\thelper_functions.unblockOnError();\r\n\t\t\t} );\r\n\t},\r\n\t/**\r\n\t * Convenience function to get CSS selector for the built-in 'Place Order' button\r\n\t *\r\n\t * @returns {string}\r\n\t */\r\n\tgetPlaceOrderButtonSelector: () => {\r\n\t\treturn '.wc-block-components-checkout-place-order-button';\r\n\t},\r\n\r\n\t/**\r\n\t * Convenience function to get CSS selector for the custom 'Place Order' button's parent element\r\n\t *\r\n\t * @param {string} id\r\n\t * @returns {string}\r\n\t */\r\n\tgetSubmitButtonTargetSelector: ( id ) => {\r\n\t\treturn '#' + id + '-card-submit';\r\n\t},\r\n\r\n\t/**\r\n\t * Convenience function to get CSS selector for the radio input associated with our payment method\r\n\t *\r\n\t * @returns {string}\r\n\t */\r\n\tgetPaymentMethodRadioSelector: ( id ) => {\r\n\t\treturn '#payment-method input[id*=\"radio-control-wc-payment-method-options-' + id + '\"]';\r\n\t},\r\n\r\n\t/**\r\n\t * Convenience function to get CSS selector for stored card radio inputs\r\n\t *\r\n\t * @returns {string}\r\n\t */\r\n\tgetStoredPaymentMethodsRadioSelector: () => {\r\n\t\treturn '#payment-method input[id*=\"radio-control-wc-payment-method-saved-tokens-\"]:checked';\r\n\t},\r\n\r\n\tisOnlyGatewayMethodDisplayed: ( id ) => {\r\n\t\tconst list = [ ...getAllElements( '#payment-method input[id*=\"radio-control-wc-payment-method-\"]' ) ];\r\n\t\tconst gateway = getElement( helper_functions.getPaymentMethodRadioSelector( id ) );\r\n\t\treturn list.includes( gateway ) && list.length === 1;\r\n\t},\r\n\tisFirstPaymentMethod: ( id ) => {\r\n\t\treturn document.querySelector('#payment-method input').value === id;\r\n\t},\r\n\r\n\t/**\r\n\t * Swaps the default WooCommerce 'Place Order' button for our iframe-d button\r\n\t * or digital wallet buttons when one of our gateways is selected.\r\n\t *\r\n\t * @returns\r\n\t */\r\n\ttoggleSubmitButtons: () => {\r\n\t\tconst selectedPaymentGatewayId = getElement( '#payment-method input[id*=\"radio-control-wc-payment-method-options-\"]:checked' )?.value;\r\n\t\tremoveClass( getElement( '.globalpayments.card-submit' ), 'is-active' );\r\n\r\n\t\tif ( params.hide.includes( selectedPaymentGatewayId ) ) {\r\n\t\t\thelper_functions.hidePlaceOrderButton();\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif ( ! params.toggle.includes( selectedPaymentGatewayId ) ) {\r\n\t\t\thelper_functions.showPlaceOrderButton();\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst submitButtonTarget = getElement( '#' + selectedPaymentGatewayId + '-card-submit' );\r\n\r\n\t\t// stored Cards available (registered user selects stored card as payment method)\r\n\t\tconst savedCardsAvailable = getElement( helper_functions.getStoredPaymentMethodsRadioSelector() );\r\n\r\n\t\t// user selects (new) card as payment method\r\n\t\tconst newSavedCardSelected = selectedPaymentGatewayId === getElement( helper_functions.getStoredPaymentMethodsRadioSelector() + ':checked' )?.value;\r\n\r\n\t\t// selected payment method is card or digital wallet\r\n\t\tif ( ! savedCardsAvailable || savedCardsAvailable && newSavedCardSelected ) {\r\n\t\t\taddClass( submitButtonTarget, 'is-active' );\r\n\t\t\thelper_functions.hidePlaceOrderButton();\r\n\t\t} else {\r\n\t\t\t// selected payment method is stored card\r\n\t\t\thideElement( submitButtonTarget );\r\n\t\t\thelper_functions.showPlaceOrderButton();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * Hide the default WooCommerce 'Place Order' button.\r\n\t */\r\n\thidePlaceOrderButton: () => {\r\n\t\thideElement( addClass( getElement( helper_functions.getPlaceOrderButtonSelector() ), 'woocommerce-globalpayments-hidden' ) );\r\n\t},\r\n\r\n\t/**\r\n\t * Show the default WooCommerce 'Place Order' button.\r\n\t */\r\n\tshowPlaceOrderButton: () => {\r\n\t\tshowElement( removeClass( getElement( helper_functions.getPlaceOrderButtonSelector() ), 'woocommerce-globalpayments-hidden' ) );\r\n\t},\r\n\r\n\t/**\r\n\t * Gets the current checkout form\r\n\t *\r\n\t * @returns {Element}\r\n\t */\r\n\tgetFormSelector: () => {\r\n\t\treturn 'form.wc-block-components-form.wc-block-checkout__form';\r\n\t},\r\n\r\n\tcreateInputElement: ( id, name, value ) => {\r\n\t\tlet inputElement = ( document.getElementById( id + '-' + name ) );\r\n\r\n\t\tif ( ! inputElement ) {\r\n\t\t\tinputElement = document.createElement( 'input' );\r\n\t\t\tinputElement.id = id + '-' + name;\r\n\t\t\tinputElement.name = id + '[' + name + ']';\r\n\t\t\tinputElement.type = 'hidden';\r\n\t\t\tgetElement( helper_functions.getFormSelector() ).appendChild( inputElement );\r\n\t\t}\r\n\r\n\t\tinputElement.value = value;\r\n\t},\r\n\r\n\t/**\r\n\t * Creates the parent for the submit button\r\n\t *\r\n\t * @returns\r\n\t */\r\n\tcreateSubmitButtonTarget: ( id ) => {\r\n\t\tconst el = document.createElement( 'div' );\r\n\t\tel.id = helper_functions.getSubmitButtonTargetSelector( id ).replace( '#', '' );\r\n\t\tel.className = 'globalpayments ' + id + ' card-submit';\r\n\r\n\t\tconst elem = getElement( helper_functions.getPlaceOrderButtonSelector() );\r\n\t\telem?.parentNode.insertBefore( el, elem.nextSibling );\r\n\t\t// match the visibility of our payment form\r\n\t\thelper_functions.toggleSubmitButtons( id );\r\n\t},\r\n\r\n\t/**\r\n\t * Places/submits the order to Woocommerce\r\n\t *\r\n\t * Attempts to click the default 'Place Order' button that is used by payment methods.\r\n\t * This is to account for other plugins taking action based on that click event, even\r\n\t * though there are usually better options. If anything fails during that process,\r\n\t * we fall back to calling `this.placeOrder` manually.\r\n\t *\r\n\t * @returns\r\n\t */\r\n\tplaceOrder: () => {\r\n\t\ttry {\r\n\t\t\tconst originalSubmit = getElement( helper_functions.getPlaceOrderButtonSelector() );\r\n\t\t\tif ( originalSubmit ) {\r\n\t\t\t\toriginalSubmit.click();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t} catch ( e ) {\r\n\t\t\t/* om nom nom */\r\n\t\t}\r\n\r\n\t\tgetElement( helper_functions.getFormSelector() ).submit();\r\n\t},\r\n\r\n\t/**\r\n\t * Shows payment error and scrolls to it\r\n\t *\r\n\t * @param {string} message Error message\r\n\t *\r\n\t * @returns\r\n\t */\r\n\tshowPaymentError: ( message ) => {\r\n\t\tconst form = getElement( helper_functions.getFormSelector() );\r\n\r\n\t\t// Remove notices from all sources\r\n\t\tgetElement( '.woocommerce-NoticeGroup, .woocommerce-NoticeGroup-checkout, .woocommerce-error, .woocommerce-globalpayments-checkout-error' )?.remove();\r\n\r\n\t\tif ( -1 === message.indexOf( 'woocommerce-error' ) ) {\r\n\t\t\tmessage = '<ul class=\"woocommerce-error\"><li>' + message + '</li></ul>';\r\n\t\t}\r\n\t\tform?.prepend( '<div class=\"woocommerce-NoticeGroup woocommerce-NoticeGroup-checkout woocommerce-globalpayments-checkout-error\">' + message + '</div>' );\r\n\r\n\t\tgetElement( 'html, body' ).animate( {\r\n\t\t\tscrollTop: ( form.offsetTop - 100 )\r\n\t\t}, 1000 );\r\n\r\n\t\thelper_functions.unblockOnError();\r\n\r\n\t\tdocument.body.dispatchEvent( new Event( 'checkout_error' ) );\r\n\t},\r\n\r\n\t/**\r\n\t * Blocks checkout UI\r\n\t *\r\n\t * Implementation pulled from `woocommerce/assets/js/frontend/checkout.js`\r\n\t *\r\n\t * @returns\r\n\t */\r\n\tblockOnSubmit: () => {\r\n\t\tconst $form = getElement( helper_functions.getFormSelector() );\r\n\t\tconst form_data = $form.data?.();\r\n\t\tif ( 1 !== form_data?.['blockUI.isBlocked'] ) {\r\n\t\t\t$form.block?.(\r\n\t\t\t\t{\r\n\t\t\t\t\tmessage: null,\r\n\t\t\t\t\toverlayCSS: {\r\n\t\t\t\t\t\tbackground: '#fff',\r\n\t\t\t\t\t\topacity: 0.6\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * Unblocks checkout UI\r\n\t *\r\n\t * @returns\r\n\t */\r\n\tunblockOnError: () => {\r\n\t\tgetElement( helper_functions.getFormSelector() )?.unblock?.();\r\n\t},\r\n\thidePaymentMethod: ( id ) => {\r\n\t\tconst paymentMethods = getPaymentMethods();\r\n\t\tdelete paymentMethods[ id ];\r\n\r\n\t\twindow.wp.data.dispatch( window.wc.wcBlocksData.PAYMENT_STORE_KEY).__internalRemoveAvailablePaymentMethod( id );\r\n\t},\r\n\t/**\r\n\t * Note: if 'setPaymentMethodData' is called multiple times will override previous data\r\n\t * thus we call it once with all the data\r\n\t */\r\n\tsetPaymentMethodData: ( data ) => {\r\n\t\twindow.wp.data.dispatch( window.wc.wcBlocksData.PAYMENT_STORE_KEY ).__internalSetPaymentMethodData( data );\r\n\t},\r\n\tdispatchInfo: ( { message, context = 'gp-wp-context', cb = null } ) => {\r\n\t\twindow.wp.data.dispatch( 'core/notices' ).createInfoNotice( message, {\r\n\t\t\tcontext,\r\n\t\t} );\r\n\r\n\t\tcb?.();\r\n\t},\r\n\tdispatchError: ( { message, context = 'gp-wp-context', cb = null } ) => {\r\n\t\twindow.wp.data.dispatch( 'core/notices' ).createErrorNotice( message, {\r\n\t\t\tcontext,\r\n\t\t} );\r\n\r\n\t\tcb?.();\r\n\t},\r\n\thasValidationErrors: () => {\r\n\t\treturn window.wp.data.select( window.wc.wcBlocksData.VALIDATION_STORE_KEY ).hasValidationErrors();\r\n\t}\r\n};\r\n","import { getSetting } from '@woocommerce/settings';\r\nimport { helper as gp_helper } from '../helper';\r\n\r\nexport const OpenBankingComponent = ( { id } ) => {\r\n\tconst settings = getSetting( id + '_data', {} );\r\n\tconst helper = gp_helper( settings.helper_params );\r\n\thelper.showPlaceOrderButton();\r\n};\r\n","import { getSetting } from '@woocommerce/settings';\r\nimport { helper as gp_helper } from \"../components/helper\";\r\nimport { useEffect } from 'react';\r\nimport { threeDSecure } from './threeDSecureComponent';\r\n\r\nconst state = {\r\n\tsettings: null,\r\n\tonSubmit: null,\r\n\tserverTransId: '',\r\n};\r\n\r\nlet helper = {};\r\nexport const SavedTokenComponent = ( props ) => {\r\n\tconst { id, onSubmit, eventRegistration } = props;\r\n\tstate.onSubmit = onSubmit;\r\n\r\n\tconst settings = getSetting( id + '_data', {} );\r\n\thelper = gp_helper( settings.helper_params );\r\n\r\n\tstate.settings = settings;\r\n\tstate.threedsecure = settings.threedsecure;\r\n\r\n\tconst { onCheckoutFail } = eventRegistration;\r\n\r\n\tuseEffect( () => {\r\n\t\twindow.onload = () => {\r\n\t\t\tattachEventHandlers();\r\n\t\t};\r\n\r\n\t\tconst unsubscribeOnCheckoutFail = onCheckoutFail( () => {\r\n\t\t\tunblockFormElements();\r\n\t\t\tremoveSpinnerFromPlaceOrderButton();\r\n\t\t} );\r\n\r\n\t\treturn () => {\r\n\t\t\tunsubscribeOnCheckoutFail();\r\n\t\t};\r\n\t}, [ onCheckoutFail ] );\r\n\r\n\tconst { StoreNoticesContainer } = window.wc.blocksCheckout;\r\n\r\n\treturn <StoreNoticesContainer context=\"gp-wp-context\" />;\r\n};\r\n\r\nconst attachEventHandlers = () => {\r\n\t// When clicked check if the selected payment method is a stored one then handle placing order\r\n\tdocument.querySelector( helper.getPlaceOrderButtonSelector() ).addEventListener( 'click', ( e ) => {\r\n\t\tif ( document.querySelector( helper.getStoredPaymentMethodsRadioSelector() ) ) {\r\n\t\t\te.preventDefault();\r\n\t\t\te.stopImmediatePropagation();\r\n\r\n\t\t\thandlePlaceOrder();\r\n\t\t}\r\n\t} );\r\n};\r\n\r\nconst addSpinnerToPlaceOrderButton = () => {\r\n\tconst el = document.querySelector( helper.getPlaceOrderButtonSelector() );\r\n\tconst span = document.createElement( 'span' );\r\n\tspan.id = 'wc-block-components-spinner';\r\n\tspan.classList.add('wc-block-components-spinner');\r\n\tel.appendChild( span );\r\n};\r\n\r\nconst removeSpinnerFromPlaceOrderButton = () => {\r\n\tdocument.querySelector( '#wc-block-components-spinner' )?.remove();\r\n};\r\n\r\nconst blockFormElements = () => {\r\n\tdocument.querySelector( helper.getFormSelector() ).classList.add( 'wc-block-components-checkout-step--disabled' );\r\n\tdocument.querySelectorAll( `${ helper.getFormSelector() } > *` ).forEach( ( input ) => {\r\n\t\tinput.style.pointerEvents = 'none';\r\n\t});\r\n};\r\nconst unblockFormElements = () => {\r\n\tdocument.querySelector( helper.getFormSelector() ).classList.remove( 'wc-block-components-checkout-step--disabled' );\r\n\tdocument.querySelectorAll( `${ helper.getFormSelector() } > *` ).forEach( ( input ) => {\r\n\t\tinput.style.pointerEvents = '';\r\n\t});\r\n};\r\n\r\nconst dispatchError = ( message ) => {\r\n\thelper.dispatchError( {\r\n\t\tmessage,\r\n\t\tcb: () => {\r\n\t\t\tremoveSpinnerFromPlaceOrderButton();\r\n\t\t\tunblockFormElements();\r\n\t\t}\r\n\t} );\r\n};\r\n\r\nconst handlePlaceOrder = () => {\r\n\tif ( helper.hasValidationErrors() ) {\r\n\t\tremoveSpinnerFromPlaceOrderButton();\r\n\t\tunblockFormElements();\r\n\r\n\t\tdocument.querySelector( '.has-error' ).scrollIntoView( {\r\n\t\t\tbehavior: 'smooth',\r\n\t\t\tblock: 'center',\r\n\t\t\tinline: 'start',\r\n\t\t} );\r\n\r\n\t\treturn;\r\n\t}\r\n\r\n\tif ( state.settings.gateway_options.enableThreeDSecure ) {\r\n\t\thelper.getOrderInfo();\r\n\t\taddSpinnerToPlaceOrderButton();\r\n\t\tblockFormElements();\r\n\t\tthreeDSecure( {\r\n\t\t\tstate,\r\n\t\t\thelper,\r\n\t\t\tdispatchError,\r\n\t\t\tplaceOrder: () => {\r\n\t\t\t\tconst paymentMethodData = window.wp.data.select( window.wc.wcBlocksData.PAYMENT_STORE_KEY ).getPaymentMethodData();\r\n\t\t\t\tpaymentMethodData.serverTransId = state.serverTransId;\r\n\r\n\t\t\t\thelper.setPaymentMethodData( paymentMethodData );\r\n\r\n\t\t\t\tstate.onSubmit();\r\n\t\t\t}\r\n\t\t} );\r\n\t} else {\r\n\t\tstate.onSubmit();\r\n\t}\r\n};\r\n","const isDifferentShippingAddress = () => {\r\n\treturn document.querySelector( '.wc-block-checkout__use-address-for-billing input[type=\"checkbox\"]' )?.checked;\r\n};\r\n\r\n/**\r\n * Get checkout billing address\r\n *\r\n * @returns {{country: *, city: *, postalCode: *, streetAddress1: *, streetAddress2: *, state: *}}\r\n */\r\nconst getBillingAddressFormData = () => {\r\n\treturn {\r\n\t\tstreetAddress1: document.querySelector( '#billing-address_1' )?.value,\r\n\t\tstreetAddress2: document.querySelector( '#billing-address_2' )?.value,\r\n\t\tcity: document.querySelector( '#billing-city' )?.value,\r\n\t\tstate: document.querySelector( '#billing-state input' )?.value,\r\n\t\tpostalCode: document.querySelector( '#billing-postcode' )?.value,\r\n\t\tcountry: document.querySelector( '#billing-country input' )?.value,\r\n\t};\r\n};\r\n\r\n/**\r\n * Get checkout shipping address\r\n *\r\n * @returns {{country, city, postalCode, streetAddress1, streetAddress2, state}}\r\n */\r\nconst getShippingAddressFormData = () => {\r\n\treturn {\r\n\t\tstreetAddress1: document.querySelector( '#shipping-address_1' )?.value,\r\n\t\tstreetAddress2: document.querySelector( '#shipping-address_2' )?.value,\r\n\t\tcity: document.querySelector( '#shipping-city' )?.value,\r\n\t\tstate: document.querySelector( '#shipping-state input' )?.value,\r\n\t\tpostalCode: document.querySelector( '#shipping-postcode' )?.value,\r\n\t\tcountry: document.querySelector( '#shipping-country input' )?.value,\r\n\t};\r\n};\r\n\r\n/**\r\n * Assists with notifying the challenge status, when the user closes the challenge window\r\n */\r\nconst cancelTransaction = () => {\r\n\twindow.parent.postMessage( { data: { \"transStatus\":\"N\" }, event: \"challengeNotification\" }, window.location.origin );\r\n};\r\n\r\n/**\r\n * 3DS Process\r\n */\r\nexport const threeDSecure = ( { state, helper, dispatchError, placeOrder } ) => {\r\n\thelper.blockOnSubmit();\r\n\tstate.settings.helper_params.order = helper.order;\r\n\r\n\tconst tokenResponse = state.tokenResponse ? JSON.stringify( state.tokenResponse ) : null;\r\n\tconst wcTokenId = document.querySelector( helper.getStoredPaymentMethodsRadioSelector() )?.value ?? 'new';\r\n\r\n\tGlobalPayments.ThreeDSecure.checkVersion( state.threedsecure.checkEnrollmentUrl, {\r\n\t\ttokenResponse,\r\n\t\twcTokenId,\r\n\t\torder: {\r\n\t\t\tid: state.settings.helper_params.order.id,\r\n\t\t\tamount: state.settings.helper_params.order.amount,\r\n\t\t\tcurrency: state.settings.helper_params.order.currency,\r\n\t\t}\r\n\t})\r\n\t.then( ( versionCheckData ) => {\r\n\t\tif ( versionCheckData.error ) {\r\n\t\t\tdispatchError( versionCheckData.message );\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tif ( \"NOT_ENROLLED\" === versionCheckData.status && \"YES\" !== versionCheckData.liabilityShift ) {\r\n\t\t\tdispatchError( 'Please try again with another card.' );\r\n\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tif ( \"NOT_ENROLLED\" === versionCheckData.status && \"YES\" === versionCheckData.liabilityShift ) {\r\n\t\t\tplaceOrder();\r\n\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\tconst addressMatch = ! isDifferentShippingAddress();\r\n\t\tconst billingAddress = getBillingAddressFormData();\r\n\t\tconst shippingAddress = addressMatch ? billingAddress : getShippingAddressFormData();\r\n\r\n\t\tGlobalPayments.ThreeDSecure.initiateAuthentication( state.threedsecure.initiateAuthenticationUrl, {\r\n\t\t\ttokenResponse,\r\n\t\t\twcTokenId,\r\n\t\t\tversionCheckData: versionCheckData,\r\n\t\t\tchallengeWindow: {\r\n\t\t\t\twindowSize: GlobalPayments.ThreeDSecure.ChallengeWindowSize.Windowed500x600,\r\n\t\t\t\tdisplayMode: 'lightbox',\r\n\t\t\t},\r\n\t\t\torder: {\r\n\t\t\t\tid: state.settings.helper_params.order.id,\r\n\t\t\t\tamount: state.settings.helper_params.order.amount,\r\n\t\t\t\tcurrency: state.settings.helper_params.order.currency,\r\n\t\t\t\tbillingAddress: billingAddress,\r\n\t\t\t\tshippingAddress: shippingAddress,\r\n\t\t\t\taddressMatchIndicator: addressMatch,\r\n\t\t\t\tcustomerEmail: document.querySelector( '.wc-block-components-address-form__email input#email' ).value,\r\n\t\t\t}\r\n\t\t})\r\n\t\t.then( ( authenticationData ) => {\r\n\t\t\tif ( authenticationData.error ) {\r\n\t\t\t\tdispatchError( authenticationData.message );\r\n\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tconst serverTransId = authenticationData.serverTransactionId || authenticationData.challenge.response.data.threeDSServerTransID || versionCheckData.serverTransactionId;\r\n\t\t\thelper.createInputElement( state.settings.id, 'serverTransId', serverTransId );\r\n\r\n\t\t\tstate.serverTransId = serverTransId;\r\n\r\n\t\t\tplaceOrder();\r\n\r\n\t\t\treturn true;\r\n\t\t})\r\n\t\t.catch( ( error ) => {\r\n\t\t\tconsole.error( error );\r\n\t\t\tconsole.error( error.reasons );\r\n\r\n\t\t\tdispatchError( 'Something went wrong while doing 3DS processing.' );\r\n\r\n\t\t\treturn false;\r\n\t\t});\r\n\t})\r\n\t.catch( ( error ) => {\r\n\t\tconsole.error( error );\r\n\t\tconsole.error( error.reasons );\r\n\r\n\t\tdispatchError( 'Something went wrong while doing 3DS processing.' );\r\n\r\n\t\treturn false;\r\n\t});\r\n\r\n\r\n\tdocument.addEventListener( 'click', ( e ) => {\r\n\t\tif ( e.target.matches( 'img[id^=\"GlobalPayments-frame-close-\"]' ) ) {\r\n\t\t\tcancelTransaction();\r\n\t\t}\r\n\t} );\r\n\r\n\treturn false;\r\n};\r\n","import { KlarnaComponent } from '../components/buyNowPayLater/klarnaComponent';\r\nimport { AffirmComponent } from '../components/buyNowPayLater/affirmComponent';\r\n\r\nexport const BuyNowPayLater = {\r\n\tAffirmComponent,\r\n\tKlarnaComponent\r\n};\r\n","import { getSetting } from '@woocommerce/settings';\r\nimport { helper as gp_helper } from \"../components/helper\";\r\nimport { useEffect } from 'react';\r\nimport { threeDSecure } from '../components/threeDSecureComponent';\r\n\r\nconst state = {\r\n\tsettings: null,\r\n\tcardForm: null,\r\n\ttokenResponse: null,\r\n\tfieldOptions: null,\r\n\tserverTransId: null,\r\n};\r\n\r\nlet helper = {};\r\nexport const CreditCard = ( props ) => {\r\n\tconst { id, eventRegistration } = props;\r\n\r\n\tconst settings = getSetting( id + '_data', {} );\r\n\tconst paymentFields = Object.entries( settings.secure_payment_fields );\r\n\tconst { StoreNoticesContainer } = window.wc.blocksCheckout;\r\n\r\n\thelper = gp_helper( settings.helper_params );\r\n\r\n\tstate.settings = settings;\r\n\tstate.fieldOptions = settings.secure_payment_fields;\r\n\tstate.threedsecure = settings.threedsecure;\r\n\r\n\tconst { onCheckoutFail } = eventRegistration;\r\n\r\n\tuseEffect( () => {\r\n\t\tattachEventHandlers();\r\n\r\n\t\tconst unsubscribe = onCheckoutFail( () => {\r\n\t\t\tunblockFormElements();\r\n\t\t\tremoveSpinnerFromSubmitButton();\r\n\t\t} );\r\n\r\n\t\treturn () => {\r\n\t\t\tif ( ! document.querySelector( helper.getPaymentMethodRadioSelector( state.settings.id ) )?.checked ) {\r\n\t\t\t\tdocument.querySelector( helper.getSubmitButtonTargetSelector( state.settings.id ) )?.remove();\r\n\t\t\t\thelper.showPlaceOrderButton();\r\n\t\t\t}\r\n\r\n\t\t\tunsubscribe();\r\n\t\t};\r\n\t}, [ onCheckoutFail ] );\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<div dangerouslySetInnerHTML={{ __html: state.settings.environment_indicator }} />\r\n\t\t\t{\r\n\t\t\t\tpaymentFields.map( ( field ) =>\r\n\t\t\t\t\t<PaymentField id={ id } field={ field[1] } key={ field[0] } />\r\n\t\t\t\t)\r\n\t\t\t}\r\n\t\t\t<StoreNoticesContainer context=\"gp-wp-context\" />\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nconst PaymentField = ( props ) => {\r\n\tconst { id, field } = props;\r\n\r\n\treturn (\r\n\t\t<div className={ `globalpayments ${id} ${field.class}` }>\r\n\t\t\t<label htmlFor={ `${id}-${field.class}` }>\r\n\t\t\t\t{ field.label }\r\n\t\t\t\t<span className=\"required\">*</span>\r\n\t\t\t</label>\r\n\t\t\t<div id={`${id}-${field.class}`}></div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nconst attachEventHandlers = () => {\r\n\t// General\r\n\tdocument.querySelector( '#order_review, #add_payment_method' )?.addEventListener( 'click', ( e ) => {\r\n\t\t\tif ( e.target.matches( '#payment-method input[type=\"radio\"]' ) ) {\r\n\t\t\t\thelper.toggleSubmitButtons();\r\n\t\t\t}\r\n\t\t}\r\n\t);\r\n\r\n\tdocument.body.addEventListener( 'checkout_error', () => {\r\n\t\tdocument.querySelector('#globalpayments_gpapi-serverTransId')?.remove();\r\n\t} );\r\n\r\n\r\n\t// Admin Pay for Order\r\n\tdocument.addEventListener( 'globalpayments_pay_order_modal_loaded', renderPaymentFields );\r\n\tdocument.addEventListener( 'globalpayments_pay_order_modal_error', ( event, message ) => {\r\n\t\thelper.showPaymentError( message );\r\n\t} );\r\n\r\n\tif ( helper.isFirstPaymentMethod( state.settings.id ) || helper.isOnlyGatewayMethodDisplayed( state.settings.id ) ) {\r\n\t\twindow.onload = () => {\r\n\t\t\trenderPaymentFields();\r\n\t\t};\r\n\t}\r\n\r\n\t// New Credit Card\r\n\tdocument.querySelector( '#radio-control-wc-payment-method-options-globalpayments_gpapi' ).addEventListener( 'change', renderPaymentFields );\r\n};\r\n\r\nconst renderPaymentFields = () => {\r\n\tconst gatewayConfig = state.settings.gateway_options;\r\n\tif ( gatewayConfig.error ) {\r\n\t\tdispatchError( gatewayConfig.message );\r\n\t}\r\n\r\n\t// ensure the submit button's parent is on the page as this is added\r\n\t// only after the initial page load\r\n\tif ( ! document.querySelector( helper.getSubmitButtonTargetSelector( state.settings.id ) ) ) {\r\n\t\thelper.createSubmitButtonTarget( state.settings.id );\r\n\t}\r\n\r\n\tconst globalPayments = GlobalPayments;\r\n\tglobalPayments.configure( gatewayConfig );\r\n\tglobalPayments.on( 'error', handleErrors);\r\n\r\n\tstate.cardForm = globalPayments.ui.form(\r\n\t\t{\r\n\t\t\tfields: getFieldConfiguration(),\r\n\t\t\tstyles: getStyleConfiguration()\r\n\t\t}\r\n\t);\r\n\r\n\tstate.cardForm.on( 'submit', 'click', () => {\r\n\t\taddSpinnerToSubmitButton();\r\n\t\tblockFormElements();\r\n\r\n\t\thelper.blockOnSubmit();\r\n\t} );\r\n\tstate.cardForm.on( 'token-success', handleResponse );\r\n\tstate.cardForm.on( 'token-error', handleErrors );\r\n\tstate.cardForm.on( 'error', handleErrors );\r\n\tstate.cardForm.on( 'card-form-validity', ( isValid ) => {\r\n\t\tif ( !isValid ) {\r\n\t\t\thelper.unblockOnError();\r\n\t\t\tremoveSpinnerFromSubmitButton();\r\n\t\t\tunblockFormElements();\r\n\t\t}\r\n\t} );\r\n\r\n\t// match the visibility of our payment form\r\n\tstate.cardForm.ready( () => {\r\n\t\thelper.toggleSubmitButtons();\r\n\t} );\r\n};\r\n\r\nconst addSpinnerToSubmitButton = () => {\r\n\tconst el = document.querySelector( helper.getSubmitButtonTargetSelector( state.settings.id ) );\r\n\tel.classList.add('wc-block-components-spinner');\r\n\tel.classList.add('wc-block-components-checkout-step--disabled');\r\n\tel.style.height = 'initial !important';\r\n\tel.style.width = 'initial !important';\r\n\tel.style.position = 'relative';\r\n};\r\n\r\nconst removeSpinnerFromSubmitButton = () => {\r\n\tconst el = document.querySelector( helper.getSubmitButtonTargetSelector( state.settings.id ) );\r\n\tel.classList.remove( 'wc-block-components-spinner' );\r\n\tel.classList.remove( 'wc-block-components-checkout-step--disabled' );\r\n\tel.style.height = 'initial !important';\r\n\tel.style.width = 'initial !important';\r\n\tel.style.position = 'relative';\r\n};\r\n\r\nconst blockFormElements = () => {\r\n\tdocument.querySelector( helper.getFormSelector() ).classList.add( 'wc-block-components-checkout-step--disabled' );\r\n\tdocument.querySelectorAll( `${ helper.getFormSelector() } > *` ).forEach( ( input ) => {\r\n\t\tinput.style.pointerEvents = 'none';\r\n\t});\r\n};\r\nconst unblockFormElements = () => {\r\n\tdocument.querySelector( helper.getFormSelector() ).classList.remove( 'wc-block-components-checkout-step--disabled' );\r\n\tdocument.querySelectorAll( `${ helper.getFormSelector() } > *` ).forEach( ( input ) => {\r\n\t\tinput.style.pointerEvents = '';\r\n\t});\r\n};\r\n\r\nconst dispatchError = ( message ) => {\r\n\thelper.dispatchError( {\r\n\t\tmessage,\r\n\t\tcb: () => {\r\n\t\t\tremoveSpinnerFromSubmitButton();\r\n\t\t\tunblockFormElements();\r\n\t\t}\r\n\t} );\r\n};\r\n\r\nconst showValidationError = ( fieldType ) => {\r\n\tdispatchError( state.settings.secure_payment_fields[fieldType].messages.validation );\r\n\r\n\thelper.unblockOnError();\r\n};\r\n\r\nconst handleErrors = ( error ) => {\r\n\tif ( ! error.reasons ) {\r\n\t\tdispatchError( 'Something went wrong. Please contact us to get assistance.' );\r\n\r\n\t\treturn;\r\n\t}\r\n\r\n\tfor ( let i = 0; i < error.reasons.length; i++ ) {\r\n\t\tconst reason = error.reasons[i];\r\n\t\tswitch ( reason.code ) {\r\n\t\t\tcase 'NOT_AUTHENTICATED':\r\n\t\t\t\tdispatchError( 'We\\'re not able to process this payment. Please refresh the page and try again.' );\r\n\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tdispatchError( reason.message );\r\n\t\t}\r\n\t}\r\n};\r\n\r\nconst getFieldConfiguration = () => {\r\n\tconst fields = {\r\n\t\t'card-number': {\r\n\t\t\tplaceholder: state.fieldOptions['card-number-field'].placeholder,\r\n\t\t\ttarget: '#' + state.settings.id + '-' + state.fieldOptions['card-number-field'].class\r\n\t\t},\r\n\t\t'card-expiration': {\r\n\t\t\tplaceholder: state.fieldOptions['card-expiry-field'].placeholder,\r\n\t\t\ttarget: '#' + state.settings.id + '-' + state.fieldOptions['card-expiry-field'].class\r\n\t\t},\r\n\t\t'card-cvv': {\r\n\t\t\tplaceholder: state.fieldOptions['card-cvc-field'].placeholder,\r\n\t\t\ttarget: '#' + state.settings.id + '-' + state.fieldOptions['card-cvc-field'].class\r\n\t\t},\r\n\t\t'submit': {\r\n\t\t\ttext: getSubmitButtonText(),\r\n\t\t\ttarget: '#' + state.settings.id + '-card-submit'\r\n\t\t}\r\n\t};\r\n\tif ( state.fieldOptions.hasOwnProperty( 'card-holder-name-field' ) ) {\r\n\t\tfields[\"card-holder-name\"] = {\r\n\t\t\tplaceholder: state.fieldOptions['card-holder-name-field'].placeholder,\r\n\t\t\ttarget: '#' + state.settings.id + '-' + state.fieldOptions['card-holder-name-field'].class\r\n\t\t}\r\n\t}\r\n\treturn fields;\r\n};\r\n\r\nconst getSubmitButtonText = () => {\r\n\tconst selector = document.querySelector( helper.getPlaceOrderButtonSelector() );\r\n\treturn selector.innerText;\r\n};\r\n\r\nconst getStyleConfiguration = () => {\r\n\treturn JSON.parse( state.settings.field_styles );\r\n};\r\n\r\nconst handleResponse = ( response ) => {\r\n\tif ( helper.hasValidationErrors() ) {\r\n\t\tremoveSpinnerFromSubmitButton();\r\n\t\tunblockFormElements();\r\n\r\n\t\twindow.wp.data.dispatch( window.wc.wcBlocksData.VALIDATION_STORE_KEY).showAllValidationErrors();\r\n\r\n\t\tdocument.querySelector( '.has-error' )?.scrollIntoView( {\r\n\t\t\tbehavior: 'smooth',\r\n\t\t\tblock: 'center',\r\n\t\t\tinline: 'start',\r\n\t\t} );\r\n\r\n\t\treturn;\r\n\t}\r\n\r\n\tif ( ! validateTokenResponse( response ) ) {\r\n\t\treturn;\r\n\t}\r\n\r\n\tstate.tokenResponse = response;\r\n\r\n\thandlePlaceOrder();\r\n};\r\n\r\nconst handlePlaceOrder = () => {\r\n\tif ( state.settings.gateway_options.enableThreeDSecure ) {\r\n\t\thelper.getOrderInfo();\r\n\r\n\t\tthreeDSecure( {\r\n\t\t\tstate,\r\n\t\t\thelper,\r\n\t\t\tdispatchError,\r\n\t\t\tplaceOrder\r\n\t\t} );\r\n\t} else {\r\n\t\tplaceOrder();\r\n\t}\r\n};\r\n\r\nconst placeOrder = () => {\r\n\tif (typeof state.cardForm.frames[ \"card-cvv\" ].getCvv === 'function' ) {\r\n\t\tstate.cardForm.frames[ \"card-cvv\" ].getCvv().then( ( cvvVal ) => {\r\n\r\n\t\t\t/**\r\n\t\t\t * CVV; needed for TransIT gateway processing only\r\n\t\t\t *\r\n\t\t\t * @type {string}\r\n\t\t\t */\r\n\t\t\tif ( state.tokenResponse ) {\r\n\t\t\t\tstate.tokenResponse.details.cardSecurityCode = cvvVal;\r\n\t\t\t}\r\n\r\n\t\t\tuseTokenToPlaceOrder();\r\n\t\t});\r\n\t} else {\r\n\t\tuseTokenToPlaceOrder();\r\n\t}\r\n}\r\n\r\nconst validateTokenResponse = ( response ) => {\r\n\tif ( response.details ) {\r\n\t\tconst expirationDate = new Date( response.details.expiryYear, response.details.expiryMonth - 1 );\r\n\t\tconst now = new Date();\r\n\t\tconst thisMonth = new Date( now.getFullYear(), now.getMonth() );\r\n\r\n\t\tif ( ! response.details.expiryYear || ! response.details.expiryMonth || expirationDate < thisMonth ) {\r\n\t\t\tshowValidationError( 'card-expiry-field' );\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\tif ( response.details && ! response.details.cardSecurityCode ) {\r\n\t\tshowValidationError( 'card-cvc-field' );\r\n\t\treturn false;\r\n\t}\r\n\r\n\treturn true;\r\n};\r\n\r\nconst useTokenToPlaceOrder = () => {\r\n\tconst paymentMethodData = {\r\n\t\ttoken_response: JSON.stringify( state.tokenResponse ),\r\n\t};\r\n\r\n\tif ( state.serverTransId ) {\r\n\t\tpaymentMethodData.serverTransId = state.serverTransId\r\n\t}\r\n\r\n\thelper.setPaymentMethodData( paymentMethodData );\r\n\r\n\thelper.placeOrder();\r\n};\r\n","import { ApplePayComponent } from '../components/digitalWallets/applePayComponent';\r\nimport { ClickToPayComponent } from '../components/digitalWallets/clickToPayComponent';\r\nimport { GooglePayComponent } from '../components/digitalWallets/googlePayComponent';\r\n\r\nexport const DigitalWallets = {\r\n\tApplePayComponent,\r\n\tClickToPayComponent,\r\n\tGooglePayComponent,\r\n};\r\n","import { BuyNowPayLater } from '../content/buyNowPayLater';\r\nimport { CreditCard } from '../content/creditCard';\r\nimport { DigitalWallets } from '../content/digitalWallets';\r\nimport { OpenBankingComponent } from '../components/openBanking/openBankingComponent';\r\nimport { PaypalComponent } from '../components/apm/paypalComponent';\r\nimport { SavedTokenComponent } from '../components/savedTokenComponent';\r\n\r\nconst { __ } = wp.i18n;\r\n\r\nexport const gpapiPaymentMethods = [ {\r\n\t\tid: 'globalpayments_gpapi',\r\n\t\tContent: <CreditCard id={ 'globalpayments_gpapi' } />,\r\n\t\tSavedTokenComponent: <SavedTokenComponent id={ 'globalpayments_gpapi' } />,\r\n\t\tcanMakePayment: ( settings ) => {\r\n\t\t\tif ( settings.gateway_options.hide && settings.gateway_options.error ) {\r\n\t\t\t\tconsole.error( settings.gateway_options.message );\r\n\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\treturn true;\r\n\t\t},\r\n\t}, {\r\n\t\tid: 'globalpayments_clicktopay',\r\n\t\tContent: <DigitalWallets.ClickToPayComponent />,\r\n\t\tSavedTokenComponent: null,\r\n\t\tcanMakePayment: ( settings ) => {\r\n\t\t\tif ( settings.payment_method_options.error ) {\r\n\t\t\t\tconsole.error( settings.payment_method_options.message );\r\n\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\treturn true;\r\n\t\t},\r\n\t}, {\r\n\t\tid: 'globalpayments_googlepay',\r\n\t\tContent: <DigitalWallets.GooglePayComponent />,\r\n\t\tSavedTokenComponent: null,\r\n\t\tcanMakePayment: () => true,\r\n\t}, {\r\n\t\tid: 'globalpayments_applepay',\r\n\t\tContent: <DigitalWallets.ApplePayComponent />,\r\n\t\tSavedTokenComponent: null,\r\n\t\tcanMakePayment: () => {\r\n\t\t\tif ( 'https:' !== location.protocol ) {\r\n\t\t\t\tconsole.warn( __( 'Apple Pay requires your checkout be served over HTTPS', 'globalpayments-gateway-provider-for-woocommerce' ) );\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tif ( true !== ( window.ApplePaySession && ApplePaySession.canMakePayments() ) ) {\r\n\t\t\t\tconsole.warn( __( 'Apple Pay is not supported on this device/browser', 'globalpayments-gateway-provider-for-woocommerce' ) );\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\treturn true;\r\n\t\t},\r\n\t}, {\r\n\t\tid: 'globalpayments_affirm',\r\n\t\tContent: <BuyNowPayLater.AffirmComponent id={ 'globalpayments_affirm' } />,\r\n\t\tSavedTokenComponent: null,\r\n\t\tcanMakePayment: () => true,\r\n\t}, {\r\n\t\tid: 'globalpayments_klarna',\r\n\t\tContent: <BuyNowPayLater.KlarnaComponent id={ 'globalpayments_klarna' } />,\r\n\t\tSavedTokenComponent: null,\r\n\t\tcanMakePayment: () => true,\r\n\t}, {\r\n\t\tid: 'globalpayments_bankpayment',\r\n\t\tContent: <OpenBankingComponent id={ 'globalpayments_bankpayment' } />,\r\n\t\tSavedTokenComponent: null,\r\n\t\tcanMakePayment: () => true,\r\n\t}, {\r\n\t\tid: 'globalpayments_paypal',\r\n\t\tContent: <PaypalComponent id={ 'globalpayments_paypal' } />,\r\n\t\tSavedTokenComponent: null,\r\n\t\tcanMakePayment: () => true,\r\n\t},\r\n];\r\n","import { registerPaymentMethod } from '@woocommerce/blocks-registry';\r\nimport { decodeEntities } from '@wordpress/html-entities';\r\nimport { getSetting } from '@woocommerce/settings';\r\n\r\nexport const register = ( props ) => {\r\n\tconst { id, Content, SavedTokenComponent, canMakePayment } = props;\r\n\tconst settings = getSetting( id + '_data', {} );\r\n\tif ( Object.entries(settings).length === 0 ) {\r\n\t\treturn;\r\n\t}\r\n\r\n\tconst label = decodeEntities( settings.title );\r\n\tconst Label = ( props ) => {\r\n\t\tconst { PaymentMethodLabel } = props.components;\r\n\t\treturn <PaymentMethodLabel text={ label } />;\r\n\t};\r\n\r\n\tconst PaymentMethod = {\r\n\t\tname: id,\r\n\t\tlabel: <Label />,\r\n\t\tcontent: Content,\r\n\t\tedit: Content,\r\n\t\tsavedTokenComponent: SavedTokenComponent,\r\n\t\tcanMakePayment: () => canMakePayment( settings ),\r\n\t\tariaLabel: label,\r\n\t\tsupports: {\r\n\t\t\tfeatures: settings.supports,\r\n\t\t\tshowSaveOption: settings.allow_card_saving\r\n\t\t},\r\n\t};\r\n\r\n\tregisterPaymentMethod( PaymentMethod );\r\n};\r\n","module.exports = window[\"React\"];","module.exports = window[\"wc\"][\"wcBlocksRegistry\"];","module.exports = window[\"wc\"][\"wcSettings\"];","module.exports = window[\"wp\"][\"htmlEntities\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { register } from '../utils/register';\r\nimport { gpapiPaymentMethods } from './gpapi';\r\nimport { getPaymentMethods } from '@woocommerce/blocks-registry';\r\n\r\nconst paymentMethods = getPaymentMethods();\r\n\r\ngpapiPaymentMethods.forEach( ( paymentMethodProps ) => {\r\n\tif ( ! paymentMethods.hasOwnProperty( paymentMethodProps.id ) ) {\r\n\t\tregister( paymentMethodProps );\r\n\t}\r\n} );\r\n"],"names":["getSetting","helper","gp_helper","PaypalComponent","id","settings","helper_params","showPlaceOrderButton","useEffect","__","wp","i18n","AffirmComponent","props","eventRegistration","onPaymentSetup","unsubscribe","shippingPhone","document","getElementById","billingPhone","value","type","message","KlarnaComponent","state","order","ApplePayComponent","attachEventHandlers","querySelector","getPaymentMethodRadioSelector","checked","removeApplePayButton","toggleSubmitButtons","isFirstPaymentMethod","isOnlyGatewayMethodDisplayed","window","onload","initialize","addEventListener","addApplePayButton","createSubmitButtonTarget","paymentButton","createElement","className","payment_method_options","button_color","title","alt","e","preventDefault","hasValidationErrors","data","dispatch","wc","wcBlocksData","VALIDATION_STORE_KEY","showAllValidationErrors","scrollIntoView","behavior","block","inline","applePaySession","createApplePaySession","begin","getSubmitButtonTargetSelector","append","getOrderInfo","ApplePaySession","getPaymentRequest","err","console","error","alert","onvalidatemerchant","event","onApplePayValidateMerchant","onpaymentauthorized","onApplePayPaymentAuthorize","oncancel","countryCode","getCountryId","currencyCode","currency","merchantCapabilities","supportedNetworks","getAllowedCardNetworks","total","label","getDisplayName","amount","toString","requiredBillingContactFields","country_code","cc_types","apple_merchant_display_name","session","fetch","validate_merchant_url","cache","body","JSON","stringify","validationURL","method","then","response","json","log","abort","completeMerchantValidation","parse","catch","paymentMethodData","dw_token","payment","token","paymentData","billingContact","cardHolderName","givenName","familyName","setPaymentMethodData","originalSubmit","getPlaceOrderButtonSelector","click","completePayment","STATUS_SUCCESS","STATUS_FAILURE","getFormSelector","submit","remove","ctpForm","ClickToPayComponent","Fragment","renderClickToPay","clearContent","GlobalPayments","configure","gatewayConfig","apms","on","handleErrors","apm","form","style","enums","Apm","ClickToPay","handleResponse","ctpElement","children","length","firstChild","removeChild","lastChild","paymentReference","placeOrder","paymentsClient","GooglePayComponent","onCheckoutFail","unsubscribeOnCheckoutFail","removeGooglePayButton","setGooglePaymentsClient","isReadyToPay","getGoogleIsReadyToPayRequest","result","addGooglePayButton","hidePaymentMethod","hidePlaceOrderButton","google","payments","api","PaymentsClient","environment","getEnvironment","env","Object","assign","getBaseRequest","allowedPaymentMethods","getBaseCardPaymentMethod","apiVersion","apiVersionMinor","parameters","allowedAuthMethods","getAllowedCardAuthMethods","allowedCardNetworks","billingAddressRequired","aca_methods","button","createButton","buttonColor","getBtnColor","onClick","onGooglePaymentButtonClicked","paymentDataRequest","getGooglePaymentDataRequest","loadPaymentData","tokenizationData","info","billingAddress","name","getCardPaymentMethod","transactionInfo","getGoogleTransactionInfo","merchantInfo","merchantId","getGoogleMerchantId","merchantName","getGoogleMerchantName","tokenizationSpecification","getTokenizationSpecification","gateway","gatewayMerchantId","global_payments_merchant_id","totalPriceStatus","totalPrice","google_merchant_id","google_merchant_name","getPaymentMethods","getElement","selector","getAllElements","querySelectorAll","addClass","element","classList","add","removeClass","hideElement","display","showElement","params","helper_functions","blockOnSubmit","orderInfoUrl","res","jqXHR","textStatus","errorThrown","finally","unblockOnError","getStoredPaymentMethodsRadioSelector","list","includes","selectedPaymentGatewayId","hide","toggle","submitButtonTarget","savedCardsAvailable","newSavedCardSelected","createInputElement","inputElement","appendChild","el","replace","elem","parentNode","insertBefore","nextSibling","showPaymentError","indexOf","prepend","animate","scrollTop","offsetTop","dispatchEvent","Event","$form","form_data","overlayCSS","background","opacity","unblock","paymentMethods","PAYMENT_STORE_KEY","__internalRemoveAvailablePaymentMethod","__internalSetPaymentMethodData","dispatchInfo","context","cb","createInfoNotice","dispatchError","createErrorNotice","select","OpenBankingComponent","threeDSecure","onSubmit","serverTransId","SavedTokenComponent","threedsecure","unblockFormElements","removeSpinnerFromPlaceOrderButton","StoreNoticesContainer","blocksCheckout","stopImmediatePropagation","handlePlaceOrder","addSpinnerToPlaceOrderButton","span","blockFormElements","forEach","input","pointerEvents","gateway_options","enableThreeDSecure","getPaymentMethodData","isDifferentShippingAddress","getBillingAddressFormData","streetAddress1","streetAddress2","city","postalCode","country","getShippingAddressFormData","cancelTransaction","parent","postMessage","location","origin","_document$querySelect","tokenResponse","wcTokenId","ThreeDSecure","checkVersion","checkEnrollmentUrl","versionCheckData","status","liabilityShift","addressMatch","shippingAddress","initiateAuthentication","initiateAuthenticationUrl","challengeWindow","windowSize","ChallengeWindowSize","Windowed500x600","displayMode","addressMatchIndicator","customerEmail","authenticationData","serverTransactionId","challenge","threeDSServerTransID","reasons","target","matches","BuyNowPayLater","cardForm","fieldOptions","CreditCard","paymentFields","entries","secure_payment_fields","removeSpinnerFromSubmitButton","dangerouslySetInnerHTML","__html","environment_indicator","map","field","PaymentField","key","class","htmlFor","renderPaymentFields","globalPayments","ui","fields","getFieldConfiguration","styles","getStyleConfiguration","addSpinnerToSubmitButton","isValid","ready","height","width","position","showValidationError","fieldType","messages","validation","i","reason","code","placeholder","text","getSubmitButtonText","hasOwnProperty","innerText","field_styles","validateTokenResponse","frames","getCvv","cvvVal","details","cardSecurityCode","useTokenToPlaceOrder","expirationDate","Date","expiryYear","expiryMonth","now","thisMonth","getFullYear","getMonth","token_response","DigitalWallets","gpapiPaymentMethods","Content","canMakePayment","protocol","warn","canMakePayments","registerPaymentMethod","decodeEntities","register","Label","PaymentMethodLabel","components","PaymentMethod","content","edit","savedTokenComponent","ariaLabel","supports","features","showSaveOption","allow_card_saving","paymentMethodProps"],"sourceRoot":""}